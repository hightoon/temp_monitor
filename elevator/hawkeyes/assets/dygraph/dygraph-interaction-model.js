Dygraph.Interaction={};
Dygraph.Interaction.startPan=function(b,c,a){a.isPanning=!0;b=c.xAxisRange();a.dateRange=b[1]-b[0];a.initialLeftmostDate=b[0];a.xUnitsPerPixel=a.dateRange/(c.plotter_.area.w-1);if(c.attr_("panEdgeFraction")){var d=c.width_*c.attr_("panEdgeFraction"),f=c.xAxisExtremes();b=c.toDomXCoord(f[0])-d;d=c.toDomXCoord(f[1])+d;b=c.toDataXCoord(b);d=c.toDataXCoord(d);a.boundedDates=[b,d];d=[];f=c.height_*c.attr_("panEdgeFraction");for(b=0;b<c.axes_.length;b++){var e=c.axes_[b],g=e.extremeRange,e=c.toDomYCoord(g[0],
b)+f,g=c.toDomYCoord(g[1],b)-f,e=c.toDataYCoord(e),g=c.toDataYCoord(g);d[b]=[e,g]}a.boundedValues=d}a.is2DPan=!1;for(b=0;b<c.axes_.length;b++)if(e=c.axes_[b],d=c.yAxisRange(b),e.logscale?(e.initialTopValue=Dygraph.log10(d[1]),e.dragValueRange=Dygraph.log10(d[1])-Dygraph.log10(d[0])):(e.initialTopValue=d[1],e.dragValueRange=d[1]-d[0]),e.unitsPerPixel=e.dragValueRange/(c.plotter_.area.h-1),e.valueWindow||e.valueRange)a.is2DPan=!0};
Dygraph.Interaction.movePan=function(b,c,a){a.dragEndX=c.dragGetX_(b,a);a.dragEndY=c.dragGetY_(b,a);b=a.initialLeftmostDate-(a.dragEndX-a.dragStartX)*a.xUnitsPerPixel;a.boundedDates&&(b=Math.max(b,a.boundedDates[0]));var d=b+a.dateRange;a.boundedDates&&d>a.boundedDates[1]&&(b-=d-a.boundedDates[1],d=b+a.dateRange);c.dateWindow_=[b,d];if(a.is2DPan)for(b=0;b<c.axes_.length;b++){var d=c.axes_[b],f=a.boundedValues?a.boundedValues[b]:null,e=d.initialTopValue+(a.dragEndY-a.dragStartY)*d.unitsPerPixel;f&&
(e=Math.min(e,f[1]));var g=e-d.dragValueRange;f&&g<f[0]&&(e-=g-f[0],g=e-d.dragValueRange);d.valueWindow=d.logscale?[Math.pow(Dygraph.LOG_SCALE,g),Math.pow(Dygraph.LOG_SCALE,e)]:[g,e]}c.drawGraph_(!1)};
Dygraph.Interaction.endPan=function(b,c,a){a.dragEndX=c.dragGetX_(b,a);a.dragEndY=c.dragGetY_(b,a);var d=Math.abs(a.dragEndX-a.dragStartX),f=Math.abs(a.dragEndY-a.dragStartY);2>d&&2>f&&void 0!=c.lastx_&&-1!=c.lastx_&&Dygraph.Interaction.treatMouseOpAsClick(c,b,a);a.isPanning=!1;a.is2DPan=!1;a.initialLeftmostDate=null;a.dateRange=null;a.valueRange=null;a.boundedDates=null;a.boundedValues=null};Dygraph.Interaction.startZoom=function(b,c,a){a.isZooming=!0};
Dygraph.Interaction.moveZoom=function(b,c,a){a.dragEndX=c.dragGetX_(b,a);a.dragEndY=c.dragGetY_(b,a);b=Math.abs(a.dragStartX-a.dragEndX);var d=Math.abs(a.dragStartY-a.dragEndY);a.dragDirection=b<d/2?Dygraph.VERTICAL:Dygraph.HORIZONTAL;c.drawZoomRect_(a.dragDirection,a.dragStartX,a.dragEndX,a.dragStartY,a.dragEndY,a.prevDragDirection,a.prevEndX,a.prevEndY);a.prevEndX=a.dragEndX;a.prevEndY=a.dragEndY;a.prevDragDirection=a.dragDirection};
Dygraph.Interaction.treatMouseOpAsClick=function(b,c,a){var d=b.attr_("clickCallback"),f=b.attr_("pointClickCallback"),e=null;if(f){for(var g=-1,l=Number.MAX_VALUE,k=0;k<b.selPoints_.length;k++){var h=b.selPoints_[k],h=Math.pow(h.canvasx-a.dragEndX,2)+Math.pow(h.canvasy-a.dragEndY,2);if(-1==g||h<l)l=h,g=k}a=b.attr_("highlightCircleSize")+2;l<=a*a&&(e=b.selPoints_[g])}e&&f(c,e);d&&d(c,b.lastx_,b.selPoints_)};
Dygraph.Interaction.endZoom=function(b,c,a){a.isZooming=!1;a.dragEndX=c.dragGetX_(b,a);a.dragEndY=c.dragGetY_(b,a);var d=Math.abs(a.dragEndX-a.dragStartX),f=Math.abs(a.dragEndY-a.dragStartY);2>d&&2>f&&void 0!=c.lastx_&&-1!=c.lastx_&&Dygraph.Interaction.treatMouseOpAsClick(c,b,a);10<=d&&a.dragDirection==Dygraph.HORIZONTAL?c.doZoomX_(Math.min(a.dragStartX,a.dragEndX),Math.max(a.dragStartX,a.dragEndX)):10<=f&&a.dragDirection==Dygraph.VERTICAL?c.doZoomY_(Math.min(a.dragStartY,a.dragEndY),Math.max(a.dragStartY,
a.dragEndY)):c.canvas_ctx_.clearRect(0,0,c.canvas_.width,c.canvas_.height);a.dragStartX=null;a.dragStartY=null};
Dygraph.Interaction.defaultModel={mousedown:function(b,c,a){a.initializeMouseDown(b,c,a);b.altKey||b.shiftKey?Dygraph.startPan(b,c,a):Dygraph.startZoom(b,c,a)},mousemove:function(b,c,a){a.isZooming?Dygraph.moveZoom(b,c,a):a.isPanning&&Dygraph.movePan(b,c,a)},mouseup:function(b,c,a){a.isZooming?Dygraph.endZoom(b,c,a):a.isPanning&&Dygraph.endPan(b,c,a)},mouseout:function(b,c,a){a.isZooming&&(a.dragEndX=null,a.dragEndY=null)},dblclick:function(b,c,a){b.altKey||b.shiftKey||c.doUnzoom_()}};
Dygraph.DEFAULT_ATTRS.interactionModel=Dygraph.Interaction.defaultModel;Dygraph.defaultInteractionModel=Dygraph.Interaction.defaultModel;Dygraph.endZoom=Dygraph.Interaction.endZoom;Dygraph.moveZoom=Dygraph.Interaction.moveZoom;Dygraph.startZoom=Dygraph.Interaction.startZoom;Dygraph.endPan=Dygraph.Interaction.endPan;Dygraph.movePan=Dygraph.Interaction.movePan;Dygraph.startPan=Dygraph.Interaction.startPan;