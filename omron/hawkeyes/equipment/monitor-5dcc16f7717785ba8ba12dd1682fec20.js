var JSON;JSON||(JSON={});
(function(){function c(e,k){var p,y,v,t,D=l,q,m=k[e];m&&"object"==typeof m&&"function"==typeof m.toJSON&&(m=m.toJSON(e));"function"==typeof r&&(m=r.call(k,e,m));switch(typeof m){case "string":return h(m);case "number":return isFinite(m)?String(m):"null";case "boolean":case "null":return String(m);case "object":if(!m)return"null";l+=s;q=[];if("[object Array]"===Object.prototype.toString.apply(m)){t=m.length;for(p=0;p<t;p+=1)q[p]=c(p,m)||"null";v=0===q.length?"[]":l?"[\n"+l+q.join(",\n"+l)+"\n"+D+"]":
"["+q.join(",")+"]";l=D;return v}if(r&&"object"==typeof r)for(t=r.length,p=0;p<t;p+=1)"string"==typeof r[p]&&(y=r[p],v=c(y,m),v&&q.push(h(y)+(l?": ":":")+v));else for(y in m)Object.prototype.hasOwnProperty.call(m,y)&&(v=c(y,m),v&&q.push(h(y)+(l?": ":":")+v));v=0===q.length?"{}":l?"{\n"+l+q.join(",\n"+l)+"\n"+D+"}":"{"+q.join(",")+"}";l=D;return v}}function h(c){k.lastIndex=0;return k.test(c)?'"'+c.replace(k,function(c){var e=w[c];return"string"==typeof e?e:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+
'"':'"'+c+'"'}function e(c){return 10>c?"0"+c:c}"use strict";"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(c){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(c){return this.valueOf()});var p=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
k=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l,s,w={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,h,k){var p;s=l="";if("number"==typeof k)for(p=0;p<k;p+=1)s+=" ";else"string"==typeof k&&(s=k);r=h;if(!h||"function"==typeof h||"object"==typeof h&&"number"==typeof h.length)return c("",{"":e});throw Error("JSON.stringify");});"function"!=
typeof JSON.parse&&(JSON.parse=function(c,e){function h(c,k){var l,q,m=c[k];if(m&&"object"==typeof m)for(l in m)Object.prototype.hasOwnProperty.call(m,l)&&(q=h(m,l),void 0!==q?m[l]=q:delete m[l]);return e.call(c,k,m)}var k;c=String(c);p.lastIndex=0;p.test(c)&&(c=c.replace(p,function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(c.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return k=eval("("+c+")"),"function"==typeof e?h({"":k},""):k;throw new SyntaxError("JSON.parse");})})();
SockJS=function(){var c=document,h=window,e={},p=function(){};p.prototype.addEventListener=function(b,a){this._listeners||(this._listeners={});b in this._listeners||(this._listeners[b]=[]);var f=this._listeners[b];-1===e.arrIndexOf(f,a)&&f.push(a)};p.prototype.removeEventListener=function(b,a){if(this._listeners&&b in this._listeners){var f=this._listeners[b],g=e.arrIndexOf(f,a);-1!==g&&(1<f.length?this._listeners[b]=f.slice(0,g).concat(f.slice(g+1)):delete this._listeners[b])}};p.prototype.dispatchEvent=
function(b){var a=b.type,f=Array.prototype.slice.call(arguments,0);this["on"+a]&&this["on"+a].apply(this,f);if(this._listeners&&a in this._listeners)for(var g=0;g<this._listeners[a].length;g++)this._listeners[a][g].apply(this,f)};var k=function(b,a){this.type=b;if("undefined"!=typeof a)for(var f in a)a.hasOwnProperty(f)&&(this[f]=a[f])};k.prototype.toString=function(){var b=[],a;for(a in this)if(this.hasOwnProperty(a)){var f=this[a];"function"==typeof f&&(f="[function]");b.push(a+"="+f)}return"SimpleEvent("+
b.join(", ")+")"};var l=function(b){this._events=b||[];this._listeners={}};l.prototype.emit=function(b){this._verifyType(b);if(!this._nuked){var a=Array.prototype.slice.call(arguments,1);this["on"+b]&&this["on"+b].apply(this,a);if(b in this._listeners)for(var f=0;f<this._listeners[b].length;f++)this._listeners[b][f].apply(this,a)}};l.prototype.on=function(b,a){this._verifyType(b);this._nuked||(b in this._listeners||(this._listeners[b]=[]),this._listeners[b].push(a))};l.prototype._verifyType=function(b){-1===
e.arrIndexOf(this._events,b)&&e.log("Event "+JSON.stringify(b)+" not listed "+JSON.stringify(this._events)+" in "+this)};l.prototype.nuke=function(){this._nuked=!0;for(var b=0;b<this._events.length;b++)delete this[this._events[b]];this._listeners={}};e.random_string=function(b,a){a=a||37;var f,g=[];for(f=0;f<b;f++)g.push("abcdefghijklmnopqrstuvwxyz0123456789_".substr(Math.floor(Math.random()*a),1));return g.join("")};e.random_number=function(b){return Math.floor(Math.random()*b)};e.random_number_string=
function(b){var a=(""+(b-1)).length;return(Array(a+1).join("0")+e.random_number(b)).slice(-a)};e.getOrigin=function(b){return(b+"/").split("/").slice(0,3).join("/")};e.isSameOriginUrl=function(b,a){return a||(a=h.location.href),b.split("/").slice(0,3).join("/")===a.split("/").slice(0,3).join("/")};e.getParentDomain=function(b){return/^[0-9.]*$/.test(b)||/^\[/.test(b)||!/[.]/.test(b)?b:b.split(".").slice(1).join(".")};e.objectExtend=function(b,a){for(var f in a)a.hasOwnProperty(f)&&(b[f]=a[f]);return b};
e.polluteGlobalNamespace=function(){"_jp"in h||(h._jp={})};e.closeFrame=function(b,a){return"c"+JSON.stringify([b,a])};e.userSetCode=function(b){return 1E3===b||3E3<=b&&4999>=b};e.countRTO=function(b){var a;return 100<b?a=3*b:a=b+200,a};e.log=function(){h.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)};e.bind=function(b,a){return b.bind?b.bind(a):function(){return b.apply(a,arguments)}};e.flatUrl=function(b){return-1===b.indexOf("?")&&-1===b.indexOf("#")};e.amendUrl=
function(b){var a=c.location;if(!b)throw Error("Wrong url for SockJS");if(!e.flatUrl(b))throw Error("Only basic urls are supported in SockJS");return 0===b.indexOf("//")&&(b=a.protocol+b),0===b.indexOf("/")&&(b=a.protocol+"//"+a.host+b),b=b.replace(/[/]+$/,""),b};e.arrIndexOf=function(b,a){for(var f=0;f<b.length;f++)if(b[f]===a)return f;return-1};e.arrSkip=function(b,a){var f=e.arrIndexOf(b,a);return-1===f?b.slice():b.slice(0,f).concat(b.slice(f+1))};e.isArray=Array.isArray||function(b){return 0<=
{}.toString.call(b).indexOf("Array")};e.delay=function(b,a){return"function"==typeof b&&(a=b,b=0),setTimeout(a,b)};var s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,w={"\x00":"\\u0000","\u0001":"\\u0001","\u0002":"\\u0002","\u0003":"\\u0003","\u0004":"\\u0004","\u0005":"\\u0005","\u0006":"\\u0006","\u0007":"\\u0007","\b":"\\b","\t":"\\t","\n":"\\n","\x0B":"\\u000b","\f":"\\f","\r":"\\r","\u000e":"\\u000e","\u000f":"\\u000f",
"\u0010":"\\u0010","\u0011":"\\u0011","\u0012":"\\u0012","\u0013":"\\u0013","\u0014":"\\u0014","\u0015":"\\u0015","\u0016":"\\u0016","\u0017":"\\u0017","\u0018":"\\u0018","\u0019":"\\u0019","\u001a":"\\u001a","\u001b":"\\u001b","\u001c":"\\u001c","\u001d":"\\u001d","\u001e":"\\u001e","\u001f":"\\u001f",'"':'\\"',"\\":"\\\\","\u007f":"\\u007f","\u0080":"\\u0080","\u0081":"\\u0081","\u0082":"\\u0082","\u0083":"\\u0083","\u0084":"\\u0084","\u0085":"\\u0085","\u0086":"\\u0086","\u0087":"\\u0087","\u0088":"\\u0088",
"\u0089":"\\u0089","\u008a":"\\u008a","\u008b":"\\u008b","\u008c":"\\u008c","\u008d":"\\u008d","\u008e":"\\u008e","\u008f":"\\u008f","\u0090":"\\u0090","\u0091":"\\u0091","\u0092":"\\u0092","\u0093":"\\u0093","\u0094":"\\u0094","\u0095":"\\u0095","\u0096":"\\u0096","\u0097":"\\u0097","\u0098":"\\u0098","\u0099":"\\u0099","\u009a":"\\u009a","\u009b":"\\u009b","\u009c":"\\u009c","\u009d":"\\u009d","\u009e":"\\u009e","\u009f":"\\u009f","\u00ad":"\\u00ad","\u0600":"\\u0600","\u0601":"\\u0601","\u0602":"\\u0602",
"\u0603":"\\u0603","\u0604":"\\u0604","\u070f":"\\u070f","\u17b4":"\\u17b4","\u17b5":"\\u17b5","\u200c":"\\u200c","\u200d":"\\u200d","\u200e":"\\u200e","\u200f":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","\u202a":"\\u202a","\u202b":"\\u202b","\u202c":"\\u202c","\u202d":"\\u202d","\u202e":"\\u202e","\u202f":"\\u202f","\u2060":"\\u2060","\u2061":"\\u2061","\u2062":"\\u2062","\u2063":"\\u2063","\u2064":"\\u2064","\u2065":"\\u2065","\u2066":"\\u2066","\u2067":"\\u2067","\u2068":"\\u2068","\u2069":"\\u2069",
"\u206a":"\\u206a","\u206b":"\\u206b","\u206c":"\\u206c","\u206d":"\\u206d","\u206e":"\\u206e","\u206f":"\\u206f","\ufeff":"\\ufeff","\ufff0":"\\ufff0","\ufff1":"\\ufff1","\ufff2":"\\ufff2","\ufff3":"\\ufff3","\ufff4":"\\ufff4","\ufff5":"\\ufff5","\ufff6":"\\ufff6","\ufff7":"\\ufff7","\ufff8":"\\ufff8","\ufff9":"\\ufff9","\ufffa":"\\ufffa","\ufffb":"\\ufffb","\ufffc":"\\ufffc","\ufffd":"\\ufffd","\ufffe":"\\ufffe","\uffff":"\\uffff"},r=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,
u,F=JSON&&JSON.stringify||function(b){return s.lastIndex=0,s.test(b)&&(b=b.replace(s,function(b){return w[b]})),'"'+b+'"'},G=function(b){var a,f={},g=[];for(a=0;65536>a;a++)g.push(String.fromCharCode(a));return b.lastIndex=0,g.join("").replace(b,function(b){return f[b]="\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4),""}),b.lastIndex=0,f};e.quote=function(b){b=F(b);return r.lastIndex=0,r.test(b)?(u||(u=G(r)),b.replace(r,function(b){return u[b]})):b};var y="websocket xdr-streaming xhr-streaming iframe-eventsource iframe-htmlfile xdr-polling xhr-polling iframe-xhr-polling jsonp-polling".split(" ");
e.probeProtocols=function(){for(var b={},a=0;a<y.length;a++){var f=y[a];b[f]=m[f]&&m[f].enabled()}return b};e.detectProtocols=function(b,a,f){var g={},c=[];a||(a=y);for(var e=0;e<a.length;e++){var h=a[e];g[h]=b[h]}var k=function(b){var a=b.shift();g[a]?c.push(a):0<b.length&&k(b)};return!1!==f.websocket&&k(["websocket"]),g["xhr-streaming"]&&!f.null_origin?c.push("xhr-streaming"):!g["xdr-streaming"]||f.cookie_needed||f.null_origin?k(["iframe-eventsource","iframe-htmlfile"]):c.push("xdr-streaming"),
g["xhr-polling"]&&!f.null_origin?c.push("xhr-polling"):!g["xdr-polling"]||f.cookie_needed||f.null_origin?k(["iframe-xhr-polling","jsonp-polling"]):c.push("xdr-polling"),c};e.createHook=function(){var b="a"+e.random_string(8);if(!("_sockjs_global"in h)){var a={};h._sockjs_global=function(b){return b in a||(a[b]={id:b,del:function(){delete a[b]}}),a[b]}}return h._sockjs_global(b)};e.attachMessage=function(b){e.attachEvent("message",b)};e.attachEvent=function(b,a){"undefined"!=typeof h.addEventListener?
h.addEventListener(b,a,!1):(c.attachEvent("on"+b,a),h.attachEvent("on"+b,a))};e.detachMessage=function(b){e.detachEvent("message",b)};e.detachEvent=function(b,a){"undefined"!=typeof h.addEventListener?h.removeEventListener(b,a,!1):(c.detachEvent("on"+b,a),h.detachEvent("on"+b,a))};var v={},t=!1,D=function(){for(var b in v)v[b](),delete v[b]};e.attachEvent("unload",function(){t||(t=!0,D())});e.unload_add=function(b){var a=e.random_string(8);return v[a]=b,t&&e.delay(D),a};e.unload_del=function(b){b in
v&&delete v[b]};e.createIframe=function(b,a){var f=c.createElement("iframe"),g,x,h=function(){clearTimeout(g);try{f.onload=null}catch(b){}f.onerror=null},k=function(){f&&(h(),setTimeout(function(){f&&f.parentNode.removeChild(f);f=null},0),e.unload_del(x))};return f.src=b,f.style.display="none",f.style.position="absolute",f.onerror=function(){f&&(k(),a("onerror"))},f.onload=function(){clearTimeout(g);g=setTimeout(function(){f&&(k(),a("onload timeout"))},2E3)},c.body.appendChild(f),g=setTimeout(function(){f&&
(k(),a("timeout"))},15E3),x=e.unload_add(k),{post:function(b,a){try{f&&f.contentWindow&&f.contentWindow.postMessage(b,a)}catch(d){}},cleanup:k,loaded:h}};e.createHtmlfile=function(b,a){var f=new ActiveXObject("htmlfile"),g,c,k,V=function(){clearTimeout(g)},l=function(){f&&(V(),e.unload_del(c),k.parentNode.removeChild(k),k=f=null,CollectGarbage())};f.open();f.write('<html><script>document.domain="'+document.domain+'";\x3c/script></html>');f.close();f.parentWindow._jp=h._jp;var m=f.createElement("div");
return f.body.appendChild(m),k=f.createElement("iframe"),m.appendChild(k),k.src=b,g=setTimeout(function(){f&&(l(),a("timeout"))},15E3),c=e.unload_add(l),{post:function(b,a){try{k&&k.contentWindow&&k.contentWindow.postMessage(b,a)}catch(d){}},cleanup:l,loaded:V}};var q=function(){};q.prototype=new l(["chunk","finish"]);q.prototype._start=function(b,a,f,g){var c=this;try{c.xhr=new XMLHttpRequest}catch(k){}if(!c.xhr)try{c.xhr=new h.ActiveXObject("Microsoft.XMLHTTP")}catch(l){}if(h.ActiveXObject||h.XDomainRequest)a+=
(-1===a.indexOf("?")?"?":"&")+"t="+ +new Date;c.unload_ref=e.unload_add(function(){c._cleanup(!0)});try{c.xhr.open(b,a,!0)}catch(m){c.emit("finish",0,"");c._cleanup();return}g&&g.no_credentials||(c.xhr.withCredentials="true");if(g&&g.headers)for(var q in g.headers)c.xhr.setRequestHeader(q,g.headers[q]);c.xhr.onreadystatechange=function(){if(c.xhr){var b=c.xhr;switch(b.readyState){case 3:try{var a=b.status,d=b.responseText}catch(f){}1223===a&&(a=204);d&&0<d.length&&c.emit("chunk",a,d);break;case 4:a=
b.status,1223===a&&(a=204),c.emit("finish",a,b.responseText),c._cleanup(!1)}}};c.xhr.send(f)};q.prototype._cleanup=function(b){if(this.xhr){e.unload_del(this.unload_ref);this.xhr.onreadystatechange=function(){};if(b)try{this.xhr.abort()}catch(a){}this.unload_ref=this.xhr=null}};q.prototype.close=function(){this.nuke();this._cleanup(!0)};(e.XHRCorsObject=function(){var b=this,a=arguments;e.delay(function(){b._start.apply(b,a)})}).prototype=new q;(e.XHRLocalObject=function(a,d,f){var g=this;e.delay(function(){g._start(a,
d,f,{no_credentials:!0})})}).prototype=new q;q=e.XDRObject=function(a,d,f){var g=this;e.delay(function(){g._start(a,d,f)})};q.prototype=new l(["chunk","finish"]);q.prototype._start=function(a,d,f){var g=this,c=new XDomainRequest;d+=(-1===d.indexOf("?")?"?":"&")+"t="+ +new Date;var h=c.ontimeout=c.onerror=function(){g.emit("finish",0,"");g._cleanup(!1)};c.onprogress=function(){g.emit("chunk",200,c.responseText)};c.onload=function(){g.emit("finish",200,c.responseText);g._cleanup(!1)};g.xdr=c;g.unload_ref=
e.unload_add(function(){g._cleanup(!0)});try{g.xdr.open(a,d),g.xdr.send(f)}catch(k){h()}};q.prototype._cleanup=function(a){if(this.xdr){e.unload_del(this.unload_ref);this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null;if(a)try{this.xdr.abort()}catch(d){}this.unload_ref=this.xdr=null}};q.prototype.close=function(){this.nuke();this._cleanup(!0)};e.isXHRCorsCapable=function(){return h.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:h.XDomainRequest&&c.domain?2:z.enabled()?
3:4};var m=function(a,d,f){if(this===h)return new m(a,d,f);var g=this,c;g._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0};f&&e.objectExtend(g._options,f);g._base_url=e.amendUrl(a);g._server=g._options.server||e.random_number_string(1E3);g._options.protocols_whitelist&&g._options.protocols_whitelist.length?c=g._options.protocols_whitelist:("string"==typeof d&&0<d.length?c=[d]:e.isArray(d)?c=d:c=null,c&&g._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.'));
g._protocols=[];g.protocol=null;g.readyState=m.CONNECTING;g._ir=J(g._base_url);g._ir.onfinish=function(a,b){g._ir=null;a?(g._options.info&&(a=e.objectExtend(a,g._options.info)),g._options.rtt&&(b=g._options.rtt),g._applyInfo(a,b,c),g._didClose()):g._didClose(1002,"Can't connect to server",!0)}};m.prototype=new p;m.version="0.3.4";m.CONNECTING=0;m.OPEN=1;m.CLOSING=2;m.CLOSED=3;m.prototype._debug=function(){this._options.debug&&e.log.apply(e,arguments)};m.prototype._dispatchOpen=function(){this.readyState===
m.CONNECTING?(this._transport_tref&&(clearTimeout(this._transport_tref),this._transport_tref=null),this.readyState=m.OPEN,this.dispatchEvent(new k("open"))):this._didClose(1006,"Server lost session")};m.prototype._dispatchMessage=function(a){this.readyState===m.OPEN&&this.dispatchEvent(new k("message",{data:a}))};m.prototype._dispatchHeartbeat=function(a){this.readyState===m.OPEN&&this.dispatchEvent(new k("heartbeat",{}))};m.prototype._didClose=function(a,d,f){var g=this;if(g.readyState!==m.CONNECTING&&
g.readyState!==m.OPEN&&g.readyState!==m.CLOSING)throw Error("INVALID_STATE_ERR");g._ir&&(g._ir.nuke(),g._ir=null);g._transport&&(g._transport.doCleanup(),g._transport=null);var c=new k("close",{code:a,reason:d,wasClean:e.userSetCode(a)});if(!e.userSetCode(a)&&g.readyState===m.CONNECTING&&!f){if(g._try_next_protocol(c))return;c=new k("close",{code:2E3,reason:"All transports failed",wasClean:!1,last_event:c})}g.readyState=m.CLOSED;e.delay(function(){g.dispatchEvent(c)})};m.prototype._didMessage=function(a){switch(a.slice(0,
1)){case "o":this._dispatchOpen();break;case "a":a=JSON.parse(a.slice(1)||"[]");for(var d=0;d<a.length;d++)this._dispatchMessage(a[d]);break;case "m":a=JSON.parse(a.slice(1)||"null");this._dispatchMessage(a);break;case "c":a=JSON.parse(a.slice(1)||"[]");this._didClose(a[0],a[1]);break;case "h":this._dispatchHeartbeat()}};m.prototype._try_next_protocol=function(a){var d=this;d.protocol&&(d._debug("Closed transport:",d.protocol,""+a),d.protocol=null);for(d._transport_tref&&(clearTimeout(d._transport_tref),
d._transport_tref=null);;){a=d.protocol=d._protocols.shift();if(!a)return!1;if(m[a]&&!0===m[a].need_body&&(!c.body||"undefined"!=typeof c.readyState&&"complete"!==c.readyState))return d._protocols.unshift(a),d.protocol="waiting-for-load",e.attachEvent("load",function(){d._try_next_protocol()}),!0;if(m[a]&&m[a].enabled(d._options)){d._transport_tref=e.delay((d._options.rto||0)*(m[a].roundTrips||1)||5E3,function(){d.readyState===m.CONNECTING&&d._didClose(2007,"Transport timeouted")});var f=e.random_string(8),
f=d._base_url+"/"+d._server+"/"+f;return d._debug("Opening transport:",a," url:"+f," RTO:"+d._options.rto),d._transport=new m[a](d,f,d._base_url),!0}d._debug("Skipping transport:",a)}};m.prototype.close=function(a,d){if(a&&!e.userSetCode(a))throw Error("INVALID_ACCESS_ERR");return this.readyState!==m.CONNECTING&&this.readyState!==m.OPEN?!1:(this.readyState=m.CLOSING,this._didClose(a||1E3,d||"Normal closure"),!0)};m.prototype.send=function(a){if(this.readyState===m.CONNECTING)throw Error("INVALID_STATE_ERR");
return this.readyState===m.OPEN&&this._transport.doSend(e.quote(""+a)),!0};m.prototype._applyInfo=function(a,d,f){this._options.info=a;this._options.rtt=d;this._options.rto=e.countRTO(d);this._options.info.null_origin=!c.domain;d=e.probeProtocols();this._protocols=e.detectProtocols(d,f,a)};q=m.websocket=function(a,d){var f=this,g=d+"/websocket";"https"===g.slice(0,5)?g="wss"+g.slice(5):g="ws"+g.slice(4);f.ri=a;f.url=g;f.ws=new (h.WebSocket||h.MozWebSocket)(f.url);f.ws.onmessage=function(a){f.ri._didMessage(a.data)};
f.unload_ref=e.unload_add(function(){f.ws.close()});f.ws.onclose=function(){f.ri._didMessage(e.closeFrame(1006,"WebSocket connection broken"))}};q.prototype.doSend=function(a){this.ws.send("["+a+"]")};q.prototype.doCleanup=function(){var a=this.ws;a&&(a.onmessage=a.onclose=null,a.close(),e.unload_del(this.unload_ref),this.unload_ref=this.ri=this.ws=null)};q.enabled=function(){return!!h.WebSocket||!!h.MozWebSocket};q.roundTrips=2;var B=function(){};B.prototype.send_constructor=function(a){this.send_buffer=
[];this.sender=a};B.prototype.doSend=function(a){this.send_buffer.push(a);this.send_stop||this.send_schedule()};B.prototype.send_schedule_wait=function(){var a=this,d;a.send_stop=function(){a.send_stop=null;clearTimeout(d)};d=e.delay(25,function(){a.send_stop=null;a.send_schedule()})};B.prototype.send_schedule=function(){var a=this;if(0<a.send_buffer.length){var d="["+a.send_buffer.join(",")+"]";a.send_stop=a.sender(a.trans_url,d,function(d,g){a.send_stop=null;!1===d?a.ri._didClose(1006,"Sending error "+
g):a.send_schedule_wait()});a.send_buffer=[]}};B.prototype.send_destructor=function(){this._send_stop&&this._send_stop();this._send_stop=null};var T=function(a,d,f){if(!("_send_form"in this)){var g=this._send_form=c.createElement("form"),x=this._send_area=c.createElement("textarea");x.name="d";g.style.display="none";g.style.position="absolute";g.method="POST";g.enctype="application/x-www-form-urlencoded";g.acceptCharset="UTF-8";g.appendChild(x);c.body.appendChild(g)}var g=this._send_form,x=this._send_area,
h="a"+e.random_string(8);g.target=h;g.action=a+"/jsonp_send?i="+h;var k;try{k=c.createElement('<iframe name="'+h+'">')}catch(l){k=c.createElement("iframe"),k.name=h}k.id=h;g.appendChild(k);k.style.display="none";try{x.value=d}catch(m){e.log("Your browser is seriously broken. Go home! "+m.message)}g.submit();var q=function(a){k.onerror&&(k.onreadystatechange=k.onerror=k.onload=null,e.delay(500,function(){k.parentNode.removeChild(k);k=null}),x.value="",f(!0))};return k.onerror=k.onload=q,k.onreadystatechange=
function(a){"complete"==k.readyState&&q()},q},U=function(a){return function(d,f,g){return(new a("POST",d+"/xhr_send",f)).onfinish=function(a,b){g(200===a||204===a,"http status "+a)},function(a){g(!1,a)}}},H=function(a,d){var f,g=c.createElement("script"),x,h=function(a){x&&(x.parentNode.removeChild(x),x=null);g&&(clearTimeout(f),g.parentNode.removeChild(g),g.onreadystatechange=g.onerror=g.onload=g.onclick=null,g=null,d(a),d=null)},k=!1,l=null;g.id="a"+e.random_string(8);g.src=a;g.type="text/javascript";
g.charset="UTF-8";g.onerror=function(a){l||(l=setTimeout(function(){k||h(e.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1E3))};g.onload=function(a){h(e.closeFrame(1006,"JSONP script loaded abnormally (onload)"))};g.onreadystatechange=function(a){if(/loaded|closed/.test(g.readyState)){if(g&&g.htmlFor&&g.onclick){k=!0;try{g.onclick()}catch(b){}}g&&h(e.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}};if("undefined"==typeof g.async&&c.attachEvent)if(/opera/i.test(navigator.userAgent))x=
c.createElement("script"),x.text="try{var a = document.getElementById('"+g.id+"'); if(a)a.onerror();}catch(x){};",g.async=x.async=!1;else{try{g.htmlFor=g.id,g.event="onclick"}catch(m){}g.async=!0}"undefined"!=typeof g.async&&(g.async=!0);f=setTimeout(function(){h(e.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35E3);var q=c.getElementsByTagName("head")[0];return q.insertBefore(g,q.firstChild),x&&q.insertBefore(x,q.firstChild),h},q=m["jsonp-polling"]=function(a,d){e.polluteGlobalNamespace();
this.ri=a;this.trans_url=d;this.send_constructor(T);this._schedule_recv()};q.prototype=new B;q.prototype._schedule_recv=function(){var a=this;a._recv_stop=A(a.trans_url+"/jsonp",H,function(d){a._recv_stop=null;d&&(a._is_closing||a.ri._didMessage(d));a._is_closing||a._schedule_recv()})};q.enabled=function(){return!0};q.need_body=!0;q.prototype.doCleanup=function(){this._is_closing=!0;this._recv_stop&&this._recv_stop();this.ri=this._recv_stop=null;this.send_destructor()};var A=function(a,d,f){var g=
"a"+e.random_string(6);a=a+"?c="+escape("_jp."+g);var c=0;d=d(a,function(a){switch(c){case 0:delete h._jp[g];f(a);break;case 1:f(a);c=2;break;case 2:delete h._jp[g]}});h._jp[g]=d;return function(){h._jp[g]&&(c=1,h._jp[g](e.closeFrame(1E3,"JSONP user aborted read")))}},q=function(){};q.prototype=new B;q.prototype.run=function(a,d,f,g,c){this.ri=a;this.trans_url=d;this.send_constructor(U(c));this.poll=new M(a,g,d+f,c)};q.prototype.doCleanup=function(){this.poll&&(this.poll.abort(),this.poll=null)};
var E=m["xhr-streaming"]=function(b,d){this.run(b,d,"/xhr_streaming",a,e.XHRCorsObject)};E.prototype=new q;E.enabled=function(){return h.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)};E.roundTrips=2;E.need_body=!0;B=m["xdr-streaming"]=function(b,d){this.run(b,d,"/xhr_streaming",a,e.XDRObject)};B.prototype=new q;B.enabled=function(){return!!h.XDomainRequest};B.roundTrips=2;var Q=m["xhr-polling"]=function(b,d){this.run(b,d,"/xhr",a,e.XHRCorsObject)};Q.prototype=
new q;Q.enabled=E.enabled;Q.roundTrips=2;E=m["xdr-polling"]=function(b,d){this.run(b,d,"/xhr",a,e.XDRObject)};E.prototype=new q;E.enabled=B.enabled;E.roundTrips=2;var z=function(){};z.prototype.i_constructor=function(a,d,f){var g=this;g.ri=a;g.origin=e.getOrigin(f);g.base_url=f;g.trans_url=d;a=f+"/iframe.html";g.ri._options.devel&&(a+="?t="+ +new Date);g.window_id=e.random_string(8);a+="#"+g.window_id;g.iframeObj=e.createIframe(a,function(a){g.ri._didClose(1006,"Unable to load an iframe ("+a+")")});
g.onmessage_cb=e.bind(g.onmessage,g);e.attachMessage(g.onmessage_cb)};z.prototype.doCleanup=function(){if(this.iframeObj){e.detachMessage(this.onmessage_cb);try{this.iframeObj.iframe.contentWindow&&this.postMessage("c")}catch(a){}this.iframeObj.cleanup();this.onmessage_cb=this.iframeObj=this.iframeObj=null}};z.prototype.onmessage=function(a){if(a.origin===this.origin){var d=a.data.slice(0,8),f=a.data.slice(8,9);a=a.data.slice(9);if(d===this.window_id)switch(f){case "s":this.iframeObj.loaded();this.postMessage("s",
JSON.stringify([m.version,this.protocol,this.trans_url,this.base_url]));break;case "t":this.ri._didMessage(a)}}};z.prototype.postMessage=function(a,d){this.iframeObj.post(this.window_id+a+(d||""),this.origin)};z.prototype.doSend=function(a){this.postMessage("m",a)};z.enabled=function(){var a=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof h.postMessage||"object"==typeof h.postMessage)&&!a};var N,n=function(a,d){parent!==h?parent.postMessage(N+
a+(d||""),"*"):e.log("Can't postMessage, no parent window.",a,d)},C=function(){};C.prototype._didClose=function(a,d){n("t",e.closeFrame(a,d))};C.prototype._didMessage=function(a){n("t",a)};C.prototype._doSend=function(a){this._transport.doSend(a)};C.prototype._doCleanup=function(){this._transport.doCleanup()};e.parent_origin=void 0;m.bootstrap_iframe=function(){var a;N=c.location.hash.slice(1);e.attachMessage(function(d){if(d.source===parent&&("undefined"==typeof e.parent_origin&&(e.parent_origin=
d.origin),d.origin===e.parent_origin)){var f=d.data.slice(0,8),g=d.data.slice(8,9);d=d.data.slice(9);if(f===N)switch(g){case "s":var c=JSON.parse(d),f=c[0],g=c[1];d=c[2];c=c[3];f!==m.version&&e.log('Incompatibile SockJS! Main site uses: "'+f+'", the iframe: "'+m.version+'".');if(!e.flatUrl(d)||!e.flatUrl(c)){e.log("Only basic urls are supported in SockJS");break}if(!e.isSameOriginUrl(d)||!e.isSameOriginUrl(c)){e.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([h.location.href,
d,c])+")");break}a=new C;a._transport=new C[g](a,d,c);break;case "m":a._doSend(d);break;case "c":a&&a._doCleanup(),a=null}}});n("s")};var I=function(a,d){var f=this;e.delay(function(){f.doXhr(a,d)})};I.prototype=new l(["finish"]);I.prototype.doXhr=function(a,d){var f=this,g=(new Date).getTime(),c=new d("GET",a+"/info"),h=e.delay(8E3,function(){c.ontimeout()});c.onfinish=function(a,b){clearTimeout(h);h=null;if(200===a){var d=(new Date).getTime()-g,c=JSON.parse(b);"object"!=typeof c&&(c={});f.emit("finish",
c,d)}else f.emit("finish")};c.ontimeout=function(){c.close();f.emit("finish")}};var R=function(a){var d=this,f=function(){var f=new z;f.protocol="w-iframe-info-receiver";var c=function(a){"string"==typeof a&&"m"===a.substr(0,1)?(a=JSON.parse(a.substr(1)),d.emit("finish",a[0],a[1])):d.emit("finish");f.doCleanup();f=null};f.i_constructor({_options:{},_didClose:c,_didMessage:c},a,a)};c.body?f():e.attachEvent("load",f)};R.prototype=new l(["finish"]);var K=function(){var a=this;e.delay(function(){a.emit("finish",
{},2E3)})};K.prototype=new l(["finish"]);var J=function(a){if(e.isSameOriginUrl(a))return new I(a,e.XHRLocalObject);switch(e.isXHRCorsCapable()){case 1:return new I(a,e.XHRLocalObject);case 2:return new I(a,e.XDRObject);case 3:return new R(a);default:return new K}};(C["w-iframe-info-receiver"]=function(a,d,f){(new I(f,e.XHRLocalObject)).onfinish=function(d,f){a._didMessage("m"+JSON.stringify([d,f]));a._didClose()}}).prototype.doCleanup=function(){};l=m["iframe-eventsource"]=function(){this.protocol=
"w-iframe-eventsource";this.i_constructor.apply(this,arguments)};l.prototype=new z;l.enabled=function(){return"EventSource"in h&&z.enabled()};l.need_body=!0;l.roundTrips=3;(C["w-iframe-eventsource"]=function(a,d){this.run(a,d,"/eventsource",O,e.XHRLocalObject)}).prototype=new q;l=m["iframe-xhr-polling"]=function(){this.protocol="w-iframe-xhr-polling";this.i_constructor.apply(this,arguments)};l.prototype=new z;l.enabled=function(){return h.XMLHttpRequest&&z.enabled()};l.need_body=!0;l.roundTrips=3;
(C["w-iframe-xhr-polling"]=function(b,d){this.run(b,d,"/xhr",a,e.XHRLocalObject)}).prototype=new q;l=m["iframe-htmlfile"]=function(){this.protocol="w-iframe-htmlfile";this.i_constructor.apply(this,arguments)};l.prototype=new z;l.enabled=function(){return z.enabled()};l.need_body=!0;l.roundTrips=3;(C["w-iframe-htmlfile"]=function(a,d){this.run(a,d,"/htmlfile",S,e.XHRLocalObject)}).prototype=new q;var M=function(a,d,f,g){this.ri=a;this.Receiver=d;this.recv_url=f;this.AjaxObject=g;this._scheduleRecv()};
M.prototype._scheduleRecv=function(){var a=this,d=a.poll=new a.Receiver(a.recv_url,a.AjaxObject);d.onmessage=function(d){a.ri._didMessage(d.data)};d.onclose=function(f){a.poll=d=d.onmessage=d.onclose=null;a.poll_is_closing||("permanent"===f.reason?a.ri._didClose(1006,"Polling error ("+f.reason+")"):a._scheduleRecv())}};M.prototype.abort=function(){this.poll_is_closing=!0;this.poll&&this.poll.abort()};var O=function(a){var d=this,f=new EventSource(a);f.onmessage=function(a){d.dispatchEvent(new k("message",
{data:unescape(a.data)}))};d.es_close=f.onerror=function(a,b){var c=b?"user":2!==f.readyState?"network":"permanent";d.es_close=f.onmessage=f.onerror=null;f.close();f=null;e.delay(200,function(){d.dispatchEvent(new k("close",{reason:c}))})}};O.prototype=new p;O.prototype.abort=function(){this.es_close&&this.es_close({},!0)};var L,S=function(a){var d=this;e.polluteGlobalNamespace();d.id="a"+e.random_string(6,26);a+=(-1===a.indexOf("?")?"?":"&")+"c="+escape("_jp."+d.id);if(void 0===L)if("ActiveXObject"in
h)try{L=!!new ActiveXObject("htmlfile")}catch(f){}else L=!1;var g=L?e.createHtmlfile:e.createIframe,c;h._jp[d.id]={start:function(){c.loaded()},message:function(a){d.dispatchEvent(new k("message",{data:a}))},stop:function(){d.iframe_close({},"network")}};d.iframe_close=function(a,b){c.cleanup();d.iframe_close=c=null;delete h._jp[d.id];d.dispatchEvent(new k("close",{reason:b}))};c=g(a,function(a){d.iframe_close({},"permanent")})};S.prototype=new p;S.prototype.abort=function(){this.iframe_close&&this.iframe_close({},
"user")};var a=function(a,d){var f=this,g=0;f.xo=new d("POST",a,null);f.xo.onchunk=function(a,b){if(200===a)for(;;){var d=b.slice(g),c=d.indexOf("\n");if(-1===c)break;g+=c+1;d=d.slice(0,c);f.dispatchEvent(new k("message",{data:d}))}};f.xo.onfinish=function(a,b){f.xo.onchunk(a,b);f.xo=null;f.dispatchEvent(new k("close",{reason:200===a?"network":"permanent"}))}};return a.prototype=new p,a.prototype.abort=function(){this.xo&&(this.xo.close(),this.dispatchEvent(new k("close",{reason:"user"})),this.xo=
null)},m.getUtils=function(){return e},m.getIframeTransport=function(){return z},m}();"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1);"function"==typeof define&&define.amd&&define("sockjs",[],function(){return SockJS});var vertx=vertx||{};
!function(c){"function"===typeof define&&define.amd?define("vertxbus",["sockjs"],c):c(SockJS)}(function(c){vertx.EventBus=function(h,e){function p(){u.send(JSON.stringify({type:"ping"}))}function k(c,h,e,k){s("address","string",h);s("replyHandler","function",k,!0);l();c={type:c,address:h,body:e};r.sessionID&&(c.sessionID=r.sessionID);k&&(h=w(),c.replyAddress=h,G[h]=k);k=JSON.stringify(c);u.send(k)}function l(){if(y!=vertx.EventBus.OPEN)throw Error("INVALID_STATE_ERR");}function s(c,h,e,k){if(!k&&
!e)throw Error("Parameter "+c+" must be specified");if(e&&typeof e!=h)throw Error("Parameter "+c+" must be of type "+h);}function w(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c,h){return h=16*Math.random(),("y"==c?h&3|8:h|0).toString(16)})}var r=this,u=new c(h,void 0,e),F={},G={},y=vertx.EventBus.CONNECTING,v=null,t=null;e&&(t=e.vertxbus_ping_interval);t||(t=5E3);r.onopen=null;r.onclose=null;r.login=function(c,h,e){k("send","vertx.basicauthmanager.login",{username:c,password:h},
function(c){"ok"===c.status&&(r.sessionID=c.sessionID);e&&(delete c.sessionID,e(c))})};r.send=function(c,h,e){k("send",c,h,e)};r.publish=function(c,h){k("publish",c,h,null)};r.registerHandler=function(c,h){s("address","string",c);s("handler","function",h);l();var e=F[c];e?e[e.length]=h:(e=[h],F[c]=e,u.send(JSON.stringify({type:"register",address:c})))};r.unregisterHandler=function(c,h){s("address","string",c);s("handler","function",h);l();var e=F[c];if(e){var k=e.indexOf(h);-1!=k&&e.splice(k,1);0==
e.length&&(u.send(JSON.stringify({type:"unregister",address:c})),delete F[c])}};r.close=function(){l();y=vertx.EventBus.CLOSING;u.close()};r.readyState=function(){return y};u.onopen=function(){p();v=setInterval(p,t);y=vertx.EventBus.OPEN;if(r.onopen)r.onopen()};u.onclose=function(){y=vertx.EventBus.CLOSED;v&&clearInterval(v);if(r.onclose)r.onclose()};u.onmessage=function(c){var h=JSON.parse(c.data);c=h.body;var e=h.replyAddress,h=h.address,k;e&&(k=function(c,h){r.send(e,c,h)});var l=F[h];if(l)for(h=
l.slice(0),l=0;l<h.length;l++)h[l](c,k);else if(l=G[h])delete G[h],l(c,k)}};vertx.EventBus.CONNECTING=0;vertx.EventBus.OPEN=1;vertx.EventBus.CLOSING=2;vertx.EventBus.CLOSED=3;return vertx.EventBus});
(function(c){var h={init:function(h){var l={color:c(this).css("background-color"),reach:20,speed:1E3,pause:0,glow:!0,repeat:!0,onHover:!1};c(this).css({"-moz-outline-radius":c(this).css("border-top-left-radius"),"-webkit-outline-radius":c(this).css("border-top-left-radius"),"outline-radius":c(this).css("border-top-left-radius")});h&&c.extend(l,h);l.color=c("<div style='background:"+l.color+"'></div>").css("background-color");!0!==l.repeat&&!isNaN(l.repeat)&&0<l.repeat&&--l.repeat;return this.each(function(){l.onHover?
c(this).bind("mouseover",function(){e(l,this,0)}).bind("mouseout",function(){c(this).pulsate("destroy")}):e(l,this,0)})},destroy:function(){return this.each(function(){clearTimeout(this.timer);c(this).css("outline",0)})}},e=function(h,l,s){var w=h.reach;s=s>w?0:s;var r=(w-s)/w,u=h.color.split(","),r="rgba("+u[0].split("(")[1]+","+u[1]+","+u[2].split(")")[0]+","+r+")",u={outline:"2px solid "+r};h.glow?(u["box-shadow"]="0px 0px "+parseInt(s/1.5)+"px "+r,userAgent=navigator.userAgent||"",/(chrome)[ \/]([\w.]+)/.test(userAgent.toLowerCase())&&
(u["outline-offset"]=s+"px",u["outline-radius"]="100 px")):u["outline-offset"]=s+"px";c(l).css(u);l.timer&&clearTimeout(l.timer);l.timer=setTimeout(function(){if(s>=w&&!h.repeat)return c(l).pulsate("destroy"),!1;if(s>=w&&!0!==h.repeat&&!isNaN(h.repeat)&&0<h.repeat)--h.repeat;else if(h.pause&&s>=w)return p(h,l,s+1),!1;e(h,l,s+1)},h.speed/w)},p=function(c,h,p){innerfunc=function(){e(c,h,p)};h.timer=setTimeout(innerfunc,c.pause)};c.fn.pulsate=function(e){if(h[e])return h[e].apply(this,Array.prototype.slice.call(arguments,
1));if("object"===typeof e||!e)return h.init.apply(this,arguments);c.error("Method "+e+" does not exist on jQuery.pulsate")}})(jQuery);(function(c){"undefined"==typeof c.fn.each2&&c.extend(c.fn,{each2:function(h){for(var e=c([0]),p=-1,k=this.length;++p<k&&(e.context=e[0]=this[p])&&!1!==h.call(e[0],p,e););return this}})})(jQuery);
(function(c,h){function e(a){var b=c(document.createTextNode(""));a.before(b);b.before(a);b.remove()}function p(a){return a.replace(/[^\u0000-\u007E]/g,function(a){return S[a]||a})}function k(a,b){for(var d=0,c=b.length;d<c;d+=1)if(s(a,b[d]))return d;return-1}function l(){var a=c("<div class='select2-measure-scrollbar'></div>");a.appendTo("body");var b={width:a.width()-a[0].clientWidth,height:a.height()-a[0].clientHeight};a.remove();return b}function s(a,b){return a===b?!0:a===h||b===h||null===a||
null===b?!1:a.constructor===String?a+""===b+"":b.constructor===String?b+""===a+"":!1}function w(a,b){var d,f,g;if(null===a||1>a.length)return[];d=a.split(b);f=0;for(g=d.length;f<g;f+=1)d[f]=c.trim(d[f]);return d}function r(a){return a.outerWidth(!1)-a.width()}function u(a){a.on("keydown",function(){c.data(a,"keyup-change-value")===h&&c.data(a,"keyup-change-value",a.val())});a.on("keyup",function(){var b=c.data(a,"keyup-change-value");b!==h&&a.val()!==b&&(c.removeData(a,"keyup-change-value"),a.trigger("keyup-change"))})}
function F(a){a.on("mousemove",function(a){var d=M;d!==h&&d.x===a.pageX&&d.y===a.pageY||c(a.target).trigger("mousemove-filtered",a)})}function G(a,b,d){d=d||h;var c;return function(){var g=arguments;window.clearTimeout(c);c=window.setTimeout(function(){b.apply(d,g)},a)}}function y(a,b){var d=G(a,function(a){b.trigger("scroll-debounced",a)});b.on("scroll",function(a){0<=k(a.target,b.get())&&d(a)})}function v(a){a[0]!==document.activeElement&&window.setTimeout(function(){var b=a[0],d=a.val().length;
a.focus();(0<b.offsetWidth||0<b.offsetHeight)&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(d,d):b.createTextRange&&(b=b.createTextRange(),b.collapse(!1),b.select()))},0)}function t(a){a.preventDefault();a.stopPropagation()}function D(a,b,d){var f,g=[],h;(f=c.trim(a.attr("class")))&&c((""+f).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&g.push(this)});if(f=c.trim(b.attr("class")))f=""+f,c(f.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(h=d(this))&&
g.push(h)});a.attr("class",g.join(" "))}function q(a,b,d,c){var g=p(a.toUpperCase()).indexOf(p(b.toUpperCase()));b=b.length;0>g?d.push(c(a)):(d.push(c(a.substring(0,g))),d.push("<span class='select2-match'>"),d.push(c(a.substring(g,g+b))),d.push("</span>"),d.push(c(a.substring(g+b,a.length))))}function m(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}function B(a){var b,d=null,f=a.quietMillis||
100,g=a.url,e=this;return function(k){window.clearTimeout(b);b=window.setTimeout(function(){var b=a.data,f=g,l=a.transport||c.fn.select2.ajaxDefaults.transport,m=c.extend({},c.fn.select2.ajaxDefaults.params,{type:a.type||"GET",cache:a.cache||!1,jsonpCallback:a.jsonpCallback||h,dataType:a.dataType||"json"}),b=b?b.call(e,k.term,k.page,k.context):null,f="function"===typeof f?f.call(e,k.term,k.page,k.context):f;d&&"function"===typeof d.abort&&d.abort();a.params&&(c.isFunction(a.params)?c.extend(m,a.params.call(e)):
c.extend(m,a.params));c.extend(m,{url:f,dataType:a.dataType,data:b,success:function(b){b=a.results(b,k.page,k);k.callback(b)},error:function(a,b,d){k.callback({hasError:!0,jqXHR:a,textStatus:b,errorThrown:d})}});d=l.call(e,m)},f)}}function T(a){var b=a,d,f,g=function(a){return""+a.text};c.isArray(b)&&(f=b,b={results:f});!1===c.isFunction(b)&&(f=b,b=function(){return f});a=b();a.text&&(g=a.text,c.isFunction(g)||(d=a.text,g=function(a){return a[d]}));return function(a){var d=a.term,f={results:[]},h;
""===d?a.callback(b()):(h=function(b,f){var e,k;b=b[0];if(b.children){e={};for(k in b)b.hasOwnProperty(k)&&(e[k]=b[k]);e.children=[];c(b.children).each2(function(a,b){h(b,e.children)});(e.children.length||a.matcher(d,g(e),b))&&f.push(e)}else a.matcher(d,g(b),b)&&f.push(b)},c(b().results).each2(function(a,b){h(b,f.results)}),a.callback(f))}}function U(a){var b=c.isFunction(a);return function(d){var f=d.term,g={results:[]},e=b?a(d):a;c.isArray(e)&&(c(e).each(function(){var a=this.text!==h,b=a?this.text:
this;(""===f||d.matcher(f,b))&&g.results.push(a?this:{id:this,text:this})}),d.callback(g))}}function H(a,b){if(c.isFunction(a))return!0;if(!a)return!1;if("string"===typeof a)return!0;throw Error(b+" must be a string, function, or falsy value");}function A(a,b){if(c.isFunction(a)){var d=Array.prototype.slice.call(arguments,2);return a.apply(b,d)}return a}function E(a){var b=0;c.each(a,function(a,c){c.children?b+=E(c.children):b++});return b}function Q(a,b,d,c){var g=a,e=!1,k,l,m,q;if(!c.createSearchChoice||
!c.tokenSeparators||1>c.tokenSeparators.length)return h;for(;;){e=-1;l=0;for(m=c.tokenSeparators.length;l<m&&!(q=c.tokenSeparators[l],e=a.indexOf(q),0<=e);l++);if(0>e)break;k=a.substring(0,e);a=a.substring(e+q.length);if(0<k.length&&(k=c.createSearchChoice.call(this,k,b),k!==h&&null!==k&&c.id(k)!==h&&null!==c.id(k))){e=!1;l=0;for(m=b.length;l<m;l++)if(s(c.id(k),c.id(b[l]))){e=!0;break}e||d(k)}}if(g!==a)return a}function z(){var a=this;c.each(arguments,function(b,d){a[d].remove();a[d]=null})}function N(a,
b){var d=function(){};d.prototype=new a;d.prototype.constructor=d;d.prototype.parent=a.prototype;d.prototype=c.extend(d.prototype,b);return d}if(window.Select2===h){var n,C,I,R,K,J,M={x:0,y:0},O,L;n={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=a.which?a.which:a;switch(a){case n.LEFT:case n.RIGHT:case n.UP:case n.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case n.SHIFT:case n.CTRL:case n.ALT:return!0}return a.metaKey?
!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}};var S={"\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A",
"\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D",
"\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F",
"\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I",
"\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L",
"\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O",
"\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P",
"\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S",
"\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U",
"\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y","\u0176":"Y",
"\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a",
"\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c",
"\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\u00eb":"e",
"\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h",
"\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k",
"\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n",
"\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o",
"\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r",
"\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\u00df":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t",
"\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v",
"\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z",
"\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"};O=c(document);K=function(){var a=
1;return function(){return a++}}();C=N(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(a){var b,d;this.opts=a=this.prepareOpts(a);this.id=a.id;a.element.data("select2")!==h&&null!==a.element.data("select2")&&a.element.data("select2").destroy();this.container=this.createContainer();this.liveRegion=c("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body);this.containerId="s2id_"+(a.element.attr("id")||"autogen"+
K());this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.container.attr("title",a.element.attr("title"));this.body=c("body");D(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.attr("style",a.element.attr("style"));this.container.css(A(a.containerCss,this.opts.element));this.container.addClass(A(a.containerCssClass,this.opts.element));this.elementTabIndex=
this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",t);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(A(a.dropdownCssClass,this.opts.element));this.dropdown.data("select2",this);this.dropdown.on("click",t);this.results=b=this.container.find(".select2-results");this.search=d=this.container.find("input.select2-input");
this.resultsPage=this.queryCount=0;this.context=null;this.initContainer();this.container.on("click",t);F(this.results);this.dropdown.on("mousemove-filtered",".select2-results",this.bind(this.highlightUnderEvent));this.dropdown.on("touchstart touchmove touchend",".select2-results",this.bind(function(a){this._touchEvent=!0;this.highlightUnderEvent(a)}));this.dropdown.on("touchmove",".select2-results",this.bind(this.touchMoved));this.dropdown.on("touchstart touchend",".select2-results",this.bind(this.clearTouchMoved));
this.dropdown.on("click",this.bind(function(a){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}));y(80,this.results);this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded));c(this.container).on("change",".select2-input",function(a){a.stopPropagation()});c(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()});c.fn.mousewheel&&b.mousewheel(function(a,d,c,f){d=b.scrollTop();0<f&&0>=d-f?(b.scrollTop(0),t(a)):0>f&&b.get(0).scrollHeight-
b.scrollTop()+f<=b.height()&&(b.scrollTop(b.get(0).scrollHeight-b.height()),t(a))});u(d);d.on("keyup-change input paste",this.bind(this.updateResults));d.on("focus",function(){d.addClass("select2-focused")});d.on("blur",function(){d.removeClass("select2-focused")});this.dropdown.on("mouseup",".select2-results",this.bind(function(a){0<c(a.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(a),this.selectHighlighted(a))}));this.dropdown.on("click mouseup mousedown touchstart touchend focusin",
function(a){a.stopPropagation()});this.nextSearchTerm=h;c.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());null!==a.maximumInputLength&&this.search.attr("maxlength",a.maximumInputLength);var f=a.element.prop("disabled");f===h&&(f=!1);this.enable(!f);f=a.element.prop("readonly");f===h&&(f=!1);this.readonly(f);L=L||l();this.autofocus=a.element.prop("autofocus");a.element.prop("autofocus",!1);this.autofocus&&this.focus();this.search.attr("placeholder",a.searchInputPlaceholder)},
destroy:function(){var a=this.opts.element,b=a.data("select2"),d=this;this.close();a.length&&a[0].detachEvent&&a.each(function(){this.detachEvent("onpropertychange",d._sync)});this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null);this._sync=null;b!==h&&(b.container.remove(),b.liveRegion.remove(),b.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):
a.removeAttr("tabindex"),a.show());z.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(a){if(a.is("option"))return{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:s(a.attr("locked"),"locked")||s(a.data("locked"),!0)};if(a.is("optgroup"))return{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}},prepareOpts:function(a){var b,d,f,g=this;b=a.element;"select"===b.get(0).tagName.toLowerCase()&&
(this.select=d=a.element);d&&c.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});a=c.extend({},{populateResults:function(b,d,f){var e,k=this.opts.id,l=this.liveRegion;e=function(b,d,x){var m,q,p,n,P,s,r;b=a.sortResults(b,d,f);var t=[];m=0;for(q=b.length;m<q;m+=1)p=b[m],P=!0===p.disabled,n=!P&&k(p)!==h,s=p.children&&0<p.children.length,r=c("<li></li>"),
r.addClass("select2-results-dept-"+x),r.addClass("select2-result"),r.addClass(n?"select2-result-selectable":"select2-result-unselectable"),P&&r.addClass("select2-disabled"),s&&r.addClass("select2-result-with-children"),r.addClass(g.opts.formatResultCssClass(p)),r.attr("role","presentation"),n=c(document.createElement("div")),n.addClass("select2-result-label"),n.attr("id","select2-result-label-"+K()),n.attr("role","option"),P=a.formatResult(p,n,f,g.opts.escapeMarkup),P!==h&&(n.html(P),r.append(n)),
s&&(s=c("<ul></ul>"),s.addClass("select2-result-sub"),e(p.children,s,x+1),r.append(s)),r.data("select2-data",p),t.push(r[0]);d.append(t);l.text(a.formatMatches(b.length))};e(d,b,0)}},c.fn.select2.defaults,a);"function"!==typeof a.id&&(f=a.id,a.id=function(a){return a[f]});if(c.isArray(a.element.data("select2Tags"))){if("tags"in a)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+a.element.attr("id");a.tags=a.element.data("select2Tags")}d?(a.query=this.bind(function(a){var d=
{results:[],more:!1},c=a.term,f,e,k;k=function(b,d){var f;b.is("option")?a.matcher(c,b.text(),b)&&d.push(g.optionToData(b)):b.is("optgroup")&&(f=g.optionToData(b),b.children().each2(function(a,b){k(b,f.children)}),0<f.children.length&&d.push(f))};f=b.children();this.getPlaceholder()!==h&&0<f.length&&(e=this.getPlaceholderOption())&&(f=f.not(e));f.each2(function(a,b){k(b,d.results)});a.callback(d)}),a.id=function(a){return a.id}):"query"in a||("ajax"in a?((d=a.element.data("ajax-url"))&&0<d.length&&
(a.ajax.url=d),a.query=B.call(a.element,a.ajax)):"data"in a?a.query=T(a.data):"tags"in a&&(a.query=U(a.tags),a.createSearchChoice===h&&(a.createSearchChoice=function(a){return{id:c.trim(a),text:c.trim(a)}}),a.initSelection===h&&(a.initSelection=function(b,d){var f=[];c(w(b.val(),a.separator)).each(function(){var b={id:this,text:this},d=a.tags;c.isFunction(d)&&(d=d());c(d).each(function(){if(s(this.id,b.id))return b=this,!1});f.push(b)});d(f)})));if("function"!==typeof a.query)throw"query function not defined for Select2 "+
a.element.attr("id");if("top"===a.createSearchChoicePosition)a.createSearchChoicePosition=function(a,b){a.unshift(b)};else if("bottom"===a.createSearchChoicePosition)a.createSearchChoicePosition=function(a,b){a.push(b)};else if("function"!==typeof a.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return a},monitorSource:function(){var a=this.opts.element,b,d=this;a.on("change.select2",this.bind(function(a){!0!==this.opts.element.data("select2-change-triggered")&&
this.initSelection()}));this._sync=this.bind(function(){var b=a.prop("disabled");b===h&&(b=!1);this.enable(!b);b=a.prop("readonly");b===h&&(b=!1);this.readonly(b);D(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(A(this.opts.containerCssClass,this.opts.element));D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(A(this.opts.dropdownCssClass,this.opts.element))});a.length&&a[0].attachEvent&&a.each(function(){this.attachEvent("onpropertychange",
d._sync)});b=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;b!==h&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new b(function(a){c.each(a,d._sync)}),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(a){a=c.Event("select2-selecting",{val:this.id(a),object:a,choice:a});this.opts.element.trigger(a);return!a.isDefaultPrevented()},triggerChange:function(a){a=a||{};a=
c.extend({},a,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var a=this._enabled&&!this._readonly;if(a===this.enabledInterface)return!1;this.container.toggleClass("select2-container-disabled",!a);this.close();this.enabledInterface=
a;return!0},enable:function(a){a===h&&(a=!0);this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){a===h&&(a=!1);this._readonly!==a&&(this._readonly=a,this.opts.element.prop("readonly",a),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var a=this.dropdown,b=this.container.offset(),d=this.container.outerHeight(!1),
f=this.container.outerWidth(!1),g=a.outerHeight(!1),h=c(window),e=h.width(),k=h.height(),l=h.scrollLeft()+e,k=h.scrollTop()+k,d=b.top+d,m=b.left,p=d+g<=k,q=b.top-g>=h.scrollTop(),n=a.outerWidth(!1),s=m+n<=l,r;a.hasClass("select2-drop-above")?(k=!0,!q&&p&&(r=!0,k=!1)):(k=!1,!p&&q&&(k=r=!0));r&&(a.hide(),b=this.container.offset(),d=this.container.outerHeight(!1),f=this.container.outerWidth(!1),g=a.outerHeight(!1),l=h.scrollLeft()+e,h.scrollTop(),d=b.top+d,m=b.left,n=a.outerWidth(!1),s=m+n<=l,a.show(),
this.focusSearch());this.opts.dropdownAutoWidth?(g=c(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),n=a.outerWidth(!1)+(g.scrollHeight===g.clientHeight?0:L.width),n>f?f=n:n=f,g=a.outerHeight(!1),s=m+n<=l):this.container.removeClass("select2-drop-auto-width");"static"!==this.body.css("position")&&(l=this.body.offset(),d-=l.top,m-=l.left);s||(m=b.left+this.container.outerWidth(!1)-n);f={left:m,width:f};k?(f.top=b.top-g,f.bottom="auto",this.container.addClass("select2-drop-above"),
a.addClass("select2-drop-above")):(f.top=d,f.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above"));f=c.extend(f,A(this.opts.dropdownCss,this.opts.element));a.css(f)},shouldOpen:function(){var a;if(this.opened()||!1===this._enabled||!0===this._readonly)return!1;a=c.Event("select2-opening");this.opts.element.trigger(a);return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},
open:function(){if(!this.shouldOpen())return!1;this.opening();O.on("mousemove.select2Event",function(a){M.x=a.pageX;M.y=a.pageY});return!0},opening:function(){var a=this.containerEventName,b="scroll."+a,d="resize."+a,f="orientationchange."+a,g;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body);g=c("#select2-drop-mask");0==g.length&&
(g=c(document.createElement("div")),g.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),g.hide(),g.appendTo(this.body),g.on("mousedown touchstart click",function(a){e(g);var b=c("#select2-drop");0<b.length&&(b=b.data("select2"),b.opts.selectOnBlur&&b.selectHighlighted({noFocus:!0}),b.close(),a.preventDefault(),a.stopPropagation())}));this.dropdown.prev()[0]!==g[0]&&this.dropdown.before(g);c("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");g.show();this.positionDropdown();
this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var h=this;this.container.parents().add(window).each(function(){c(this).on(d+" "+b+" "+f,function(a){h.opened()&&h.positionDropdown()})})},close:function(){if(this.opened()){var a=this.containerEventName,b="scroll."+a,d="resize."+a,f="orientationchange."+a;this.container.parents().add(window).each(function(){c(this).off(b).off(d).off(f)});this.clearDropdownAlignmentPreference();c("#select2-drop-mask").hide();
this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();O.off("mousemove.select2Event");this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(c.Event("select2-close"))}},externalSearch:function(a){this.open();this.search.val(a);this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return A(this.opts.maximumSelectionSize,this.opts.element)},
ensureHighlightVisible:function(){var a=this.results,b,d,f,g,h;d=this.highlight();0>d||(0==d?a.scrollTop(0):(b=this.findHighlightableChoices().find(".select2-result-label"),f=c(b[d]),h=(f.offset()||{}).top||0,g=h+f.outerHeight(!0),d===b.length-1&&(b=a.find("li.select2-more-results"),0<b.length&&(g=b.offset().top+b.outerHeight(!0))),b=a.offset().top+a.outerHeight(!0),g>b&&a.scrollTop(a.scrollTop()+(g-b)),g=h-a.offset().top,0>g&&"none"!=f.css("display")&&a.scrollTop(a.scrollTop()+g)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},
moveHighlight:function(a){for(var b=this.findHighlightableChoices(),d=this.highlight();-1<d&&d<b.length;){var d=d+a,f=c(b[d]);if(f.hasClass("select2-result-selectable")&&!f.hasClass("select2-disabled")&&!f.hasClass("select2-selected")){this.highlight(d);break}}},highlight:function(a){var b=this.findHighlightableChoices();if(0===arguments.length)return k(b.filter(".select2-highlighted")[0],b.get());a>=b.length&&(a=b.length-1);0>a&&(a=0);this.removeHighlight();b=c(b[a]);b.addClass("select2-highlighted");
this.search.attr("aria-activedescendant",b.find(".select2-result-label").attr("id"));this.ensureHighlightVisible();this.liveRegion.text(b.text());(b=b.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(b),choice:b})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},
highlightUnderEvent:function(a){a=c(a.target).closest(".select2-result-selectable");if(0<a.length&&!a.is(".select2-highlighted")){var b=this.findHighlightableChoices();this.highlight(b.index(a))}else 0==a.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),d,c=this.resultsPage+1,g=this,h=this.search.val(),e=this.context;0!==b.length&&(d=b.offset().top-a.offset().top-a.height(),d<=this.opts.loadMorePadding&&(b.addClass("select2-active"),
this.opts.query({element:this.opts.element,term:h,page:c,context:e,matcher:this.opts.matcher,callback:this.bind(function(d){g.opened()&&(g.opts.populateResults.call(this,a,d.results,{term:h,page:c,context:e}),g.postprocessResults(d,!1,!1),!0===d.more?(b.detach().appendTo(a).text(A(g.opts.formatLoadMore,g.opts.element,c+1)),window.setTimeout(function(){g.loadMoreIfNeeded()},10)):b.remove(),g.positionDropdown(),g.resultsPage=c,g.context=d.context,this.opts.element.trigger({type:"select2-loaded",items:d}))})})))},
tokenize:function(){},updateResults:function(a){function b(){f.removeClass("select2-active");l.positionDropdown();g.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?l.liveRegion.text(g.text()):l.liveRegion.text(l.opts.formatMatches(g.find(".select2-result-selectable").length))}function d(a){g.html(a);b()}var f=this.search,g=this.results,e=this.opts,k,l=this;k=f.val();var m=c.data(this.container,"select2-last-term"),n;if(!0===a||!m||!s(k,m))if(c.data(this.container,"select2-last-term",
k),!0===a||!1!==this.showSearchInput&&this.opened()){n=++this.queryCount;m=this.getMaximumSelectionSize();if(1<=m&&(k=this.data(),c.isArray(k)&&k.length>=m&&H(e.formatSelectionTooBig,"formatSelectionTooBig"))){d("<li class='select2-selection-limit'>"+A(e.formatSelectionTooBig,e.element,m)+"</li>");return}f.val().length<e.minimumInputLength?(H(e.formatInputTooShort,"formatInputTooShort")?d("<li class='select2-no-results'>"+A(e.formatInputTooShort,e.element,f.val(),e.minimumInputLength)+"</li>"):d(""),
a&&this.showSearch&&this.showSearch(!0)):e.maximumInputLength&&f.val().length>e.maximumInputLength?H(e.formatInputTooLong,"formatInputTooLong")?d("<li class='select2-no-results'>"+A(e.formatInputTooLong,e.element,f.val(),e.maximumInputLength)+"</li>"):d(""):(e.formatSearching&&0===this.findHighlightableChoices().length&&d("<li class='select2-searching'>"+A(e.formatSearching,e.element)+"</li>"),f.addClass("select2-active"),this.removeHighlight(),k=this.tokenize(),k!=h&&null!=k&&f.val(k),this.resultsPage=
1,e.query({element:e.element,term:f.val(),page:this.resultsPage,context:null,matcher:e.matcher,callback:this.bind(function(k){var m;n==this.queryCount&&(this.opened()?k.hasError!==h&&H(e.formatAjaxError,"formatAjaxError")?d("<li class='select2-ajax-error'>"+A(e.formatAjaxError,e.element,k.jqXHR,k.textStatus,k.errorThrown)+"</li>"):(this.context=k.context===h?null:k.context,this.opts.createSearchChoice&&""!==f.val()&&(m=this.opts.createSearchChoice.call(l,f.val(),k.results),m!==h&&null!==m&&l.id(m)!==
h&&null!==l.id(m)&&0===c(k.results).filter(function(){return s(l.id(this),l.id(m))}).length&&this.opts.createSearchChoicePosition(k.results,m)),0===k.results.length&&H(e.formatNoMatches,"formatNoMatches")?d("<li class='select2-no-results'>"+A(e.formatNoMatches,e.element,f.val())+"</li>"):(g.empty(),l.opts.populateResults.call(this,g,k.results,{term:f.val(),page:this.resultsPage,context:null}),!0===k.more&&H(e.formatLoadMore,"formatLoadMore")&&(g.append("<li class='select2-more-results'>"+e.escapeMarkup(A(e.formatLoadMore,
e.element,this.resultsPage))+"</li>"),window.setTimeout(function(){l.loadMoreIfNeeded()},10)),this.postprocessResults(k,a),b(),this.opts.element.trigger({type:"select2-loaded",items:k}))):this.search.removeClass("select2-active"))})}))}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},
focusSearch:function(){v(this.search)},selectHighlighted:function(a){if(this._touchMoved)this.clearTouchMoved();else{var b=this.highlight(),d=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()}},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((a=this.getPlaceholderOption())!==
h?a.text():h)},getPlaceholderOption:function(){if(this.select){var a=this.select.children("option").first();if(this.opts.placeholderOption!==h)return"first"===this.opts.placeholderOption&&a||"function"===typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===c.trim(a.text())&&""===a.val())return a}},initContainerWidth:function(){var a=function(){var a,d,f,g;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?
"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){a=this.opts.element.attr("style");if(a!==h)for(a=a.split(";"),f=0,g=a.length;f<g;f+=1)if(d=a[f].replace(/\s/g,""),d=d.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==d&&1<=d.length)return d[1];return"resolve"===this.opts.width?(a=this.opts.element.css("width"),0<a.indexOf("%")?a:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return c.isFunction(this.opts.width)?
this.opts.width():this.opts.width}.call(this);null!==a&&this.container.css("width",a)}});I=N(C,{createContainer:function(){return c(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span></a><label for='' class='select2-offscreen'></label><input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' /><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <label for='' class='select2-offscreen'></label>       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'       aria-autocomplete='list' />   </div>   <ul class='select2-results' role='listbox'>   </ul></div>")},
enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var a,b;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0);this.parent.opening.apply(this,arguments);!1!==this.showSearchInput&&this.search.val(this.focusser.val());this.opts.shouldFocusInput(this)&&(this.search.focus(),a=this.search.get(0),a.createTextRange?(a=a.createTextRange(),a.collapse(!1),a.select()):a.setSelectionRange&&(b=this.search.val().length,
a.setSelectionRange(b,b)));""===this.search.val()&&this.nextSearchTerm!=h&&(this.search.val(this.nextSearchTerm),this.search.select());this.focusser.prop("disabled",!0).val("");this.updateResults(!0);this.opts.element.trigger(c.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&
this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.prop("disabled",!1);this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){c("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);z.call(this,"selection","focusser")},initContainer:function(){var a,b=this.container,d=this.dropdown,
f=K();0>this.opts.minimumResultsForSearch?this.showSearch(!1):this.showSearch(!0);this.selection=a=b.find(".select2-choice");this.focusser=b.find(".select2-focusser");a.find(".select2-chosen").attr("id","select2-chosen-"+f);this.focusser.attr("aria-labelledby","select2-chosen-"+f);this.results.attr("id","select2-results-"+f);this.search.attr("aria-owns","select2-results-"+f);this.focusser.attr("id","s2id_autogen"+f);b=c("label[for='"+this.opts.element.attr("id")+"']");this.focusser.prev().text(b.text()).attr("for",
this.focusser.attr("id"));f=this.opts.element.attr("title");this.opts.element.attr("title",f||b.text());this.focusser.attr("tabindex",this.elementTabIndex);this.search.attr("id",this.focusser.attr("id")+"_search");this.search.prev().text(c("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&229!=a.keyCode)if(a.which===n.PAGE_UP||a.which===n.PAGE_DOWN)t(a);else switch(a.which){case n.UP:case n.DOWN:this.moveHighlight(a.which===
n.UP?-1:1);t(a);break;case n.ENTER:this.selectHighlighted();t(a);break;case n.TAB:this.selectHighlighted({noFocus:!0});break;case n.ESC:this.cancel(a),t(a)}}));this.search.on("blur",this.bind(function(a){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==n.TAB&&!n.isControl(a)&&!n.isFunctionKey(a)&&a.which!==n.ESC)if(!1===this.opts.openOnEnter&&
a.which===n.ENTER)t(a);else if(a.which==n.DOWN||a.which==n.UP||a.which==n.ENTER&&this.opts.openOnEnter)a.altKey||a.ctrlKey||a.shiftKey||a.metaKey||(this.open(),t(a));else if(a.which==n.DELETE||a.which==n.BACKSPACE)this.opts.allowClear&&this.clear(),t(a)}));u(this.focusser);this.focusser.on("keyup-change input",this.bind(function(a){0<=this.opts.minimumResultsForSearch&&(a.stopPropagation(),this.opened()||this.open())}));a.on("mousedown touchstart","abbr",this.bind(function(a){this.isInterfaceEnabled()&&
(this.clear(),a.preventDefault(),a.stopImmediatePropagation(),this.close(),this.selection.focus())}));a.on("mousedown touchstart",this.bind(function(b){e(a);this.container.hasClass("select2-container-active")||this.opts.element.trigger(c.Event("select2-focus"));this.opened()?this.close():this.isInterfaceEnabled()&&this.open();t(b)}));d.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()}));a.on("focus",this.bind(function(a){t(a)}));this.focusser.on("focus",
this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(c.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(c.Event("select2-blur")))}));this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(c.Event("select2-focus"));this.container.addClass("select2-container-active")}));
this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(a){var b=this.selection.data("select2-data");if(b){var d=c.Event("select2-clearing");this.opts.element.trigger(d);d.isDefaultPrevented()||(d=this.getPlaceholderOption(),this.opts.element.val(d?d.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==a&&(this.opts.element.trigger({type:"select2-removed",val:this.id(b),
choice:b}),this.triggerChange({removed:b})))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){b!==h&&null!==b&&(a.updateSelection(b),a.close(),a.setPlaceholder(),a.nextSearchTerm=a.opts.nextSearchTerm(b,a.search.val()))})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()===h?!1:(a=this.getPlaceholderOption())!==h&&a.prop("selected")||
""===this.opts.element.val()||this.opts.element.val()===h||null===this.opts.element.val()},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,c){var g=a.find("option").filter(function(){return this.selected&&!this.disabled});c(b.optionToData(g))}:"data"in a&&(a.initSelection=a.initSelection||function(b,f){var g=b.val(),e=null;a.query({matcher:function(b,d,c){(b=s(g,a.id(c)))&&(e=c);return b},
callback:c.isFunction(f)?function(){f(e)}:c.noop})});return a},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===h?h:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();!this.isPlaceholderOptionSelected()||a===h||this.select&&this.getPlaceholderOption()===h||(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},
postprocessResults:function(a,b,d){var c=0,g=this;this.findHighlightableChoices().each2(function(a,b){if(s(g.id(b.data("select2-data")),g.opts.element.val()))return c=a,!1});!1!==d&&(!0===b&&0<=c?this.highlight(c):this.highlight(0));!0===b&&(b=this.opts.minimumResultsForSearch,0<=b&&this.showSearch(E(a.results)>=b))},showSearch:function(a){this.showSearchInput!==a&&(this.showSearchInput=a,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!a),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",
!a),c(this.dropdown,this.container).toggleClass("select2-with-searchbox",a))},onSelect:function(a,b){if(this.triggerSelect(a)){var d=this.opts.element.val(),c=this.data();this.opts.element.val(this.id(a));this.updateSelection(a);this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a});this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val());this.close();b&&b.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus();s(d,this.id(a))||this.triggerChange({added:a,
removed:c})}},updateSelection:function(a){var b=this.selection.find(".select2-chosen"),d;this.selection.data("select2-data",a);b.empty();null!==a&&(d=this.opts.formatSelection(a,b,this.opts.escapeMarkup));d!==h&&b.append(d);a=this.opts.formatSelectionCssClass(a,b);a!==h&&b.addClass(a);this.selection.removeClass("select2-default");this.opts.allowClear&&this.getPlaceholder()!==h&&this.container.addClass("select2-allowclear")},val:function(){var a,b=!1,d=null,c=this,g=this.data();if(0===arguments.length)return this.opts.element.val();
a=arguments[0];1<arguments.length&&(b=arguments[1]);if(this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){d=c.optionToData(b);return!1}),this.updateSelection(d),this.setPlaceholder(),b&&this.triggerChange({added:d,removed:g});else if(a||0===a){if(this.opts.initSelection===h)throw Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a);this.opts.initSelection(this.opts.element,function(a){c.opts.element.val(a?c.id(a):
"");c.updateSelection(a);c.setPlaceholder();b&&c.triggerChange({added:a,removed:g})})}else this.clear(b)},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(a){var b,d=!1;if(0===arguments.length)return b=this.selection.data("select2-data"),b==h&&(b=null),b;1<arguments.length&&(d=arguments[1]);a?(b=this.data(),this.opts.element.val(a?this.id(a):""),this.updateSelection(a),d&&this.triggerChange({added:a,removed:b})):this.clear(d)}});R=N(C,{createContainer:function(){return c(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("<ul class='select2-choices'>  <li class='select2-search-field'>    <label for='' class='select2-offscreen'></label>    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   </ul></div>")},
prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,c){var g=[];a.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(a,d){g.push(b.optionToData(d))});c(g)}:"data"in a&&(a.initSelection=a.initSelection||function(b,f){var g=w(b.val(),a.separator),e=[];a.query({matcher:function(b,d,f){(b=c.grep(g,function(b){return s(b,a.id(f))}).length)&&e.push(f);return b},
callback:c.isFunction(f)?function(){for(var b=[],d=0;d<g.length;d++)for(var c=g[d],h=0;h<e.length;h++){var k=e[h];if(s(c,a.id(k))){b.push(k);e.splice(h,1);break}}f(b)}:c.noop})});return a},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",
a)))},destroy:function(){c("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);z.call(this,"searchContainer","selection")},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");var b=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(a){b.search[0].focus();b.selectChoice(c(this))});this.search.attr("id",
"s2id_autogen"+K());this.search.prev().text(c("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(b){var f,g;if(this.isInterfaceEnabled()){++this.keydowns;var e=a.find(".select2-search-choice-focus"),
h=e.prev(".select2-search-choice:not(.select2-locked)"),k=e.next(".select2-search-choice:not(.select2-locked)");f=this.search;f=c(f)[0];var l=0;g=0;"selectionStart"in f?(l=f.selectionStart,g=f.selectionEnd-l):"selection"in document&&(f.focus(),l=document.selection.createRange(),g=document.selection.createRange().text.length,l.moveStart("character",-f.value.length),l=l.text.length-g);f=l;if(!e.length||b.which!=n.LEFT&&b.which!=n.RIGHT&&b.which!=n.BACKSPACE&&b.which!=n.DELETE&&b.which!=n.ENTER)if((b.which!==
n.BACKSPACE||1!=this.keydowns)&&b.which!=n.LEFT||0!=f||g){this.selectChoice(null);if(this.opened())switch(b.which){case n.UP:case n.DOWN:this.moveHighlight(b.which===n.UP?-1:1);t(b);return;case n.ENTER:this.selectHighlighted();t(b);return;case n.TAB:this.selectHighlighted({noFocus:!0});this.close();return;case n.ESC:this.cancel(b);t(b);return}b.which===n.TAB||n.isControl(b)||n.isFunctionKey(b)||b.which===n.BACKSPACE||b.which===n.ESC||b.which===n.ENTER&&(!1===this.opts.openOnEnter||b.altKey||b.ctrlKey||
b.shiftKey||b.metaKey)||(this.open(),b.which!==n.PAGE_UP&&b.which!==n.PAGE_DOWN||t(b),b.which===n.ENTER&&t(b))}else this.selectChoice(a.find(".select2-search-choice:not(.select2-locked)").last()),t(b);else g=e,b.which==n.LEFT&&h.length?g=h:b.which==n.RIGHT?g=k.length?k:null:b.which===n.BACKSPACE?this.unselect(e.first())&&(this.search.width(10),g=h.length?h:k):b.which==n.DELETE?this.unselect(e.first())&&(this.search.width(10),g=k.length?k:null):b.which==n.ENTER&&(g=null),this.selectChoice(g),t(b),
g&&g.length||this.open()}}));this.search.on("keyup",this.bind(function(a){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(a){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);this.opened()||this.clearSearch();a.stopImmediatePropagation();this.opts.element.trigger(c.Event("select2-blur"))}));this.container.on("click",".select2-choices",this.bind(function(a){!this.isInterfaceEnabled()||0<c(a.target).closest(".select2-search-choice").length||
(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(c.Event("select2-focus")),this.open(),this.focusSearch(),a.preventDefault())}));this.container.on("focus",".select2-choices",this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(c.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),
this.clearPlaceholder())}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,
function(b){b!==h&&null!==b&&(a.updateSelection(b),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),b=this.getMaxSearchWidth();a!==h&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(0<b?b:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();
this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();""===this.search.val()&&this.nextSearchTerm!=h&&(this.search.val(this.nextSearchTerm),this.search.select());this.updateResults(!0);this.opts.shouldFocusInput(this)&&this.search.focus();this.opts.element.trigger(c.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},
updateSelection:function(a){var b=[],d=[],f=this;c(a).each(function(){0>k(f.id(this),b)&&(b.push(f.id(this)),d.push(this))});a=d;this.selection.find(".select2-search-choice").remove();c(a).each(function(){f.addSelectedChoice(this)});f.postprocessResults()},tokenize:function(){var a=this.search.val(),a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts);null!=a&&a!=h&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&""!==a.text&&
(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(a,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()?
this.updateResults(!0):this.nextSearchTerm!=h&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),b&&b.noFocus||this.focusSearch())},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b=!a.locked,d=c("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),f=c("<li class='select2-search-choice select2-locked'><div></div></li>"),
d=b?d:f,f=this.id(a),g=this.getVal(),e;e=this.opts.formatSelection(a,d.find("div"),this.opts.escapeMarkup);e!=h&&d.find("div").replaceWith("<div>"+e+"</div>");e=this.opts.formatSelectionCssClass(a,d.find("div"));e!=h&&d.addClass(e);if(b)d.find(".select2-search-choice-close").on("mousedown",t).on("click dblclick",this.bind(function(a){this.isInterfaceEnabled()&&(this.unselect(c(a.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),t(a),this.close(),
this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));d.data("select2-data",a);d.insertBefore(this.searchContainer);g.push(f);this.setVal(g)},unselect:function(a){var b=this.getVal(),d,f;a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";if(d=a.data("select2-data")){f=c.Event("select2-removing");f.val=this.id(d);
f.choice=d;this.opts.element.trigger(f);if(f.isDefaultPrevented())return!1;for(;0<=(f=k(this.id(d),b));)b.splice(f,1),this.setVal(b),this.select&&this.postprocessResults();a.remove();this.opts.element.trigger({type:"select2-removed",val:this.id(d),choice:d});this.triggerChange({removed:d});return!0}},postprocessResults:function(a,b,c){var f=this.getVal();b=this.results.find(".select2-result");var e=this.results.find(".select2-result-with-children"),h=this;b.each2(function(a,b){var c=h.id(b.data("select2-data"));
0<=k(c,f)&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))});e.each2(function(a,b){b.is(".select2-result-selectable")||0!==b.find(".select2-result-selectable:not(.select2-selected)").length||b.addClass("select2-selected")});-1==this.highlight()&&!1!==c&&h.highlight(0);!this.opts.createSearchChoice&&0< !b.filter(".select2-result:not(.select2-selected)").length&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&H(h.opts.formatNoMatches,
"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+A(h.opts.formatNoMatches,h.opts.element,h.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-r(this.search)},resizeSearch:function(){var a,b,d,f,e=r(this.search);a=this.search;J||(d=a[0].currentStyle||window.getComputedStyle(a[0],null),J=c(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:d.fontSize,fontFamily:d.fontFamily,fontStyle:d.fontStyle,
fontWeight:d.fontWeight,letterSpacing:d.letterSpacing,textTransform:d.textTransform,whiteSpace:"nowrap"}),J.attr("class","select2-sizer"),c("body").append(J));J.text(a.val());a=J.width()+10;b=this.search.offset().left;d=this.selection.width();f=this.selection.offset().left;b=d-(b-f)-e;b<a&&(b=d-e);40>b&&(b=d-e);0>=b&&(b=a);this.search.width(Math.floor(b))},getVal:function(){var a;if(this.select)return a=this.select.val(),null===a?[]:a;a=this.opts.element.val();return w(a,this.opts.separator)},setVal:function(a){var b;
this.select?this.select.val(a):(b=[],c(a).each(function(){0>k(this,b)&&b.push(this)}),this.opts.element.val(0===b.length?"":b.join(this.opts.separator)))},buildChangeDetails:function(a,b){b=b.slice(0);a=a.slice(0);for(var c=0;c<b.length;c++)for(var f=0;f<a.length;f++)s(this.opts.id(b[c]),this.opts.id(a[f]))&&(b.splice(c,1),0<c&&c--,a.splice(f,1),f--);return{added:b,removed:a}},val:function(a,b){var d,f=this;if(0===arguments.length)return this.getVal();d=this.data();d.length||(d=[]);if(a||0===a){this.setVal(a);
if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),b&&this.triggerChange(this.buildChangeDetails(d,this.data()));else{if(this.opts.initSelection===h)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(a){var e=c.map(a,f.id);f.setVal(e);f.updateSelection(a);f.clearSearch();b&&f.triggerChange(f.buildChangeDetails(d,f.data()))})}this.clearSearch()}else this.opts.element.val(""),this.updateSelection([]),
this.clearSearch(),b&&this.triggerChange({added:this.data(),removed:d})},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(c(this).data("select2-data")))});
this.setVal(a);this.triggerChange()},data:function(a,b){var d=this,f,e;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return c(this).data("select2-data")}).get();e=this.data();a||(a=[]);f=c.map(a,function(a){return d.opts.id(a)});this.setVal(f);this.updateSelection(a);this.clearSearch();b&&this.triggerChange(this.buildChangeDetails(e,this.data()))}});c.fn.select2=function(){var a=Array.prototype.slice.call(arguments,0),b,d,f,e,l,m="val destroy opened open close focus isFocused container dropdown onSortStart onSortEnd enable disable readonly positionDropdown data search".split(" "),
n=["opened","isFocused","container","dropdown"],p=["val","data"],q={search:"externalSearch"};this.each(function(){if(0===a.length||"object"===typeof a[0])b=0===a.length?{}:c.extend({},a[0]),b.element=c(this),"select"===b.element.get(0).tagName.toLowerCase()?l=b.element.prop("multiple"):(l=b.multiple||!1,"tags"in b&&(b.multiple=l=!0)),d=l?new window.Select2["class"].multi:new window.Select2["class"].single,d.init(b);else if("string"===typeof a[0]){if(0>k(a[0],m))throw"Unknown method: "+a[0];e=h;d=
c(this).data("select2");if(d!==h&&(f=a[0],"container"===f?e=d.container:"dropdown"===f?e=d.dropdown:(q[f]&&(f=q[f]),e=d[f].apply(d,a.slice(1))),0<=k(a[0],n)||0<=k(a[0],p)&&1==a.length))return!1}else throw"Invalid arguments to select2 plugin: "+a;});return e===h?this:e};c.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,f){b=[];q(a.text,c.term,b,f);return b.join("")},
formatSelection:function(a,b,c){return a?c(a.text):h},sortResults:function(a,b,c){return a},formatResultCssClass:function(a){return a.css},formatSelectionCssClass:function(a,b){return h},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a==h?null:a.id},matcher:function(a,b){return 0<=p(""+b).toUpperCase().indexOf(p(""+a).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:Q,escapeMarkup:m,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},
adaptDropdownCssClass:function(a){return null},nextSearchTerm:function(a,b){return h},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(a){return"ontouchstart"in window||0<navigator.msMaxTouchPoints?0>a.opts.minimumResultsForSearch?!1:!0:!0}};c.fn.select2.locales=[];c.fn.select2.locales.en={formatMatches:function(a){return 1===a?"One result is available, press enter to select it.":a+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},
formatAjaxError:function(a,b,c){return"Loading failed"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" or more character"+(1==c?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(a){return"Loading more results\u2026"},formatSearching:function(){return"Searching\u2026"}};c.extend(c.fn.select2.defaults,
c.fn.select2.locales.en);c.fn.select2.ajaxDefaults={transport:c.ajax,params:{type:"GET",cache:!1,dataType:"json"}};window.Select2={query:{ajax:B,local:T,tags:U},util:{debounce:G,markMatch:q,escapeMarkup:m,stripDiacritics:p},"class":{"abstract":C,single:I,multi:R}}}})(jQuery);
(function(c){c.fn.select2.locales.en={formatMatches:function(c){return 1===c?"One result is available, press enter to select it.":c+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(c,e){var p=e-c.length;return"Please enter "+p+" or more character"+(1==p?"":"s")},formatInputTooLong:function(c,e){var p=c.length-e;return"Please delete "+p+" character"+(1==p?"":"s")},formatSelectionTooBig:function(c){return"You can only select "+
c+" item"+(1==c?"":"s")},formatLoadMore:function(c){return"Loading more results\u2026"},formatSearching:function(){return"Searching\u2026"}};c.extend(c.fn.select2.defaults,c.fn.select2.locales.en)})(jQuery);
(function(c){c.fn.select2.locales["zh-CN"]={formatNoMatches:function(){return"\u6ca1\u6709\u627e\u5230\u5339\u914d\u9879!"},formatInputTooShort:function(c,e){return"\u8bf7\u518d\u8f93\u5165"+(e-c.length)+"\u4e2a\u5b57\u7b26"},formatInputTooLong:function(c,e){return"\u8bf7\u5220\u6389"+(c.length-e)+"\u4e2a\u5b57\u7b26"},formatSelectionTooBig:function(c){return"\u4f60\u53ea\u80fd\u9009\u62e9\u6700\u591a"+c+"\u9879"},formatLoadMore:function(c){return"\u52a0\u8f7d\u7ed3\u679c\u4e2d\u2026"},formatSearching:function(){return"\u641c\u7d22\u4e2d\u2026"}};
c.extend(c.fn.select2.defaults,c.fn.select2.locales["zh-CN"])})(jQuery);
var rowCount=0,title="",xLabel="\u65f6\u95f4",yLabel="",labels,realtimeDataBuffer={key:"",value:[]},realtimeGraph={},historyGraph={},HighShutdown=null,hisItemId,LowShutdown=null,alarmArray=[],getRealtimeGraphData=function(c,h,e,p,k){$.get(contextPath+"/equipment/graphData?eqid="+c+"&itemiId="+h+"&startDate="+p+"&endDate=",function(k){if(k.result){resetLabels();realtimeDataBuffer.key=c+"-"+h;realtimeDataBuffer.value=[];dygraph=null;yLabel=k.name;var p=k.name+" "+graphLabel,w=k.name+"("+unitLabel+":"+
k.unitName+")";labels=[xLabel,yLabel];alarmArray=[];null!=k.highShutdown&&(HighShutdown=k.highShutdown,labels.push(highShutdownLabel),alarmArray.push(k.highShutdown));null!=k.highAlarm&&(labels.push(highAlarmLabel),alarmArray.push(k.highAlarm),null==HighShutdown&&(HighShutdown=k.highAlarm));null!=k.lowAlarm&&(labels.push(lowAlarmLabel),LowShutdown=k.lowAlarm,alarmArray.push(k.lowAlarm));null!=k.lowShutdown&&(labels.push(lowShutdownLabel),LowShutdown=k.lowShutdown,alarmArray.push(k.lowShutdown));k=
k.dataString.split(";");if(1==k.length)if(0<alarmArray.length)for(i=3600;0<i;i--)realtimeDataBuffer.value.push([new Date((new Date).getTime()-1E3*i),null].concat(alarmArray));else for(i=3600;0<i;i--)realtimeDataBuffer.value.push([new Date((new Date).getTime()-1E3*i),null]);else if(0<alarmArray.length)for(i=0;i<k.length-1;i++){realtimeDataBuffer.value.push([new Date(new Number(k[i].split(",")[0])),k[i].split(",")[1]].concat(alarmArray));if(null==LowShutdown||0==LowShutdown)LowShutdown=parseFloat(k[i].split(",")[1]);
if(null==HighShutdown||0==HighShutdown)HighShutdown=parseFloat(k[i].split(",")[1]);LowShutdown>parseFloat(k[i].split(",")[1])&&(LowShutdown=parseFloat(k[i].split(",")[1]));HighShutdown<parseFloat(k[i].split(",")[1])&&(HighShutdown=parseFloat(k[i].split(",")[1]))}else for(i=0;i<k.length-1;i++){realtimeDataBuffer.value.push([new Date(new Number(k[i].split(",")[0])),k[i].split(",")[1]]);if(null==LowShutdown||0==LowShutdown)LowShutdown=parseFloat(k[i].split(",")[1]);if(null==HighShutdown||0==HighShutdown)HighShutdown=
parseFloat(k[i].split(",")[1]);LowShutdown>parseFloat(k[i].split(",")[1])&&(LowShutdown=parseFloat(k[i].split(",")[1]));HighShutdown<parseFloat(k[i].split(",")[1])&&(HighShutdown=parseFloat(k[i].split(",")[1]))}realtimeGraph=new Dygraph(document.getElementById("graphdiv"),realtimeDataBuffer.value,{labelsDivStyles:{background:"none","text-align":"right"},labelsDivWidth:300,xAxisLabelWidth:70,width:e-17,height:.5*pageHeight(),labels:labels,legend:"always",title:p,ylabel:w});null!=HighShutdown&&null!=
LowShutdown?(LowShutdown=0>LowShutdown?1.1*LowShutdown-1:.9*LowShutdown-1,HighShutdown=0>HighShutdown?.9*HighShutdown+1:1.1*HighShutdown+1):null==LowShutdown&&0>HighShutdown?(LowShutdown=1.1*HighShutdown,HighShutdown=0):null==HighShutdown&&0>LowShutdown&&(LowShutdown*=1.1,HighShutdown=0);realtimeGraph.updateOptions({valueRange:[LowShutdown,HighShutdown]});HighAlarm=LowAlarm=LowShutdown=HighShutdown=null}else console.log(k)})},resetLabels=function(){$("#beginDate").val((new Date).pattern("yyyy-MM-dd")+
" 00:00");$("#endDate").val((new Date).pattern("yyyy-MM-dd HH:mm"))},updateFlashRealtimeGrapData=function(c){var h=JSON.parse(c).data;c=JSON.parse(c);for(i=0;i<h.length;i++)h[i].key===realtimeDataBuffer.key&&(realtimeDataBuffer.value.shift(),realtimeDataBuffer.value.push([new Date(c.timestamp),h[i].value].concat(alarmArray)),realtimeGraph.updateOptions({file:realtimeDataBuffer.value}))},equipmentsStatus=function(c){var h=JSON.parse(c);c=h.data;var e=h.eId,h=h.sId;1==c.runningStatus?$("#imgRunStatus_"+
e+"_"+h).attr("src",imgContextPath+"/assets/state/run.png"):0==c.runningStatus&&$("#imgRunStatus_"+e+"_"+h).attr("src",imgContextPath+"/assets/state/stop.png");0==c.alarmStatus?$("#imgAlarmStatus_"+e+"_"+h).attr("src",imgContextPath+"/assets/state/bulb-green.png"):1==c.alarmStatus?$("#imgAlarmStatus_"+e+"_"+h).attr("src",imgContextPath+"/assets/state/bulb-yellow.png"):2==c.alarmStatus&&$("#imgAlarmStatus_"+e+"_"+h).attr("src",imgContextPath+"/assets/state/bulb-red.png")},samplerStatus=function(c){c=
JSON.parse(c);var h=c.sId;0<c.data.length?$("#img_"+h).attr("src",imgContextPath+"/assets/state/run.png"):$("#img_"+h).attr("src",imgContextPath+"/assets/state/disconnect.png")},allDataCallback=function(c){var h=JSON.parse(c);c=h.data;var e=h.timestamp,p=h.power,h=h.equipmentId;App.unblockUI($("#lockModalDiv"));if(c)for(var k=0;k<c.length;k++){c[k].key===realtimeDataBuffer.key&&(realtimeDataBuffer.value.shift(),realtimeDataBuffer.value.push([new Date(e),c[k].value].concat(alarmArray)),realtimeGraph.updateOptions({file:realtimeDataBuffer.value}));
c[k].name?($("#unit_"+c[k].key).text(""),$("#span_realtime_"+c[k].key).text(c[k].name)):($("#span_realtime_"+c[k].key).text(c[k].value),$("#unit_"+c[k].key).text(null==c[k].unit?"":c[k].unit));var l=$("#span_remainTime_"+c[k].key);0<l.length&&l.text((l.attr("oldValue")-c[k].value).toFixed(1))}$("#latestReportDataTime_"+h).text((new Date(e)).format("yyyy-MM-dd hh:mm"));p&&(h+"-power"===realtimeDataBuffer.key&&(realtimeDataBuffer.value.shift(),realtimeDataBuffer.value.push([new Date(e),p].concat(alarmArray)),
realtimeGraph.updateOptions({file:realtimeDataBuffer.value})),$("span[id^='unit_'][id$='-power']").text("kW"),$("span[id^='span_realtime_'][id$='-power']").text(p));App.unblockUI($("#lockModalDiv"))},searchHistory=function(c,h,e,p){$.get(contextPath+"/equipment/showHistoryData?eqid="+c+"&itemiId="+h+"&startDate="+$("#beginDate").val()+"&endDate="+$("#endDate").val(),function(c){c.result&&($("#beginLabel").html($("#beginDate").val()),$("#endLabel").html($("#endDate").val()),drawHistoryGraph(c,h,e))})},
drawHistoryGraph=function(c,h,e,p){var k=c.dataString.split(";"),l=c.name,s=[xLabel,l],w=[],r=[],u=c.name+"(\u5355\u4f4d:"+c.unitName+")",F=c.max,G=c.min;if(1<k.length){for(i=0;i<k.length-1;i++)c=k[i].split(","),w.push([new Date(new Number(c[0])),c[1]].concat(r));historyGraph[h]=new Dygraph(document.getElementById("historyDiv_"+h),w,{labelsDivStyles:{backgroundColor:"transparent"},axisLabelColor:"green",highlightCircleSize:5,labelsDivWidth:300,xAxisLabelWidth:35,width:e-17,height:p,labels:s,legend:"always",
ylabel:u});historyGraph[h].updateOptions({valueRange:[G,F]})}else historyGraph[h]=null,$("input[itemid='"+h+"']").parent().parent().text(),$("#historyDiv_"+h).html('<div class="alert alert-error text-center"><strong>'+l+"</strong> "+noDataLabel+"</div>");$("#searchHistory").button("reset");App.unblockUI($("#lockModalDiv"))},getRealtimGraphData=function(c,h,e,p){$.get(contextPath+"/equipment/graphData?eqid="+c+"&itemiId="+h+"&startDate="+e+"&endDate=",function(e){if(e.result){resetLabels();realtimeDataBuffer.key=
c+"-"+h;realtimeDataBuffer.value=[];dygraph=null;yLabel=e.name;var l=e.name+"\u66f2\u7ebf\u56fe",p=e.name+"(\u5355\u4f4d:"+e.unitName+")";labels=[xLabel,yLabel];alarmArray=[];null!=e.highShutdown&&(HighShutdown=e.highShutdown,labels.push("\u9ad8\u505c\u673a\u503c"),alarmArray.push(e.highShutdown));null!=e.highAlarm&&(labels.push("\u9ad8\u62a5\u8b66\u503c"),alarmArray.push(e.highAlarm),null==HighShutdown&&(HighShutdown=e.highAlarm));null!=e.lowAlarm&&(labels.push("\u4f4e\u62a5\u8b66\u503c"),LowShutdown=
e.lowAlarm,alarmArray.push(e.lowAlarm));null!=e.lowShutdown&&(labels.push("\u4f4e\u505c\u673a\u503c"),LowShutdown=e.lowShutdown,alarmArray.push(e.lowShutdown));e=e.dataString.split(";");if(1==e.length)if(0<alarmArray.length)for(i=3600;0<i;i--)realtimeDataBuffer.value.push([new Date((new Date).getTime()-1E3*i),null].concat(alarmArray));else for(i=3600;0<i;i--)realtimeDataBuffer.value.push([new Date((new Date).getTime()-1E3*i),null]);else if(0<alarmArray.length)for(i=0;i<e.length-1;i++){realtimeDataBuffer.value.push([new Date(new Number(e[i].split(",")[0])),
e[i].split(",")[1]].concat(alarmArray));if(null==LowShutdown||0==LowShutdown)LowShutdown=parseFloat(e[i].split(",")[1]);if(null==HighShutdown||0==HighShutdown)HighShutdown=parseFloat(e[i].split(",")[1]);LowShutdown>parseFloat(e[i].split(",")[1])&&(LowShutdown=parseFloat(e[i].split(",")[1]));HighShutdown<parseFloat(e[i].split(",")[1])&&(HighShutdown=parseFloat(e[i].split(",")[1]))}else for(i=0;i<e.length-1;i++){realtimeDataBuffer.value.push([new Date(new Number(e[i].split(",")[0])),e[i].split(",")[1]]);
if(null==LowShutdown||0==LowShutdown)LowShutdown=parseFloat(e[i].split(",")[1]);if(null==HighShutdown||0==HighShutdown)HighShutdown=parseFloat(e[i].split(",")[1]);LowShutdown>parseFloat(e[i].split(",")[1])&&(LowShutdown=parseFloat(e[i].split(",")[1]));HighShutdown<parseFloat(e[i].split(",")[1])&&(HighShutdown=parseFloat(e[i].split(",")[1]))}realtimeGraph=new Dygraph(document.getElementById("realtimeDiv"),realtimeDataBuffer.value,{labelsDivStyles:{background:"none","text-align":"right"},labelsDivWidth:300,
xAxisLabelWidth:70,width:.43*pageWidth(),height:.5*pageHeight(),labels:labels,legend:"always",title:l,ylabel:p});null!=HighShutdown&&null!=LowShutdown?(LowShutdown=0>LowShutdown?1.1*LowShutdown-1:.9*LowShutdown-1,HighShutdown=0>HighShutdown?.9*HighShutdown+1:1.1*HighShutdown+1):null==LowShutdown&&0>HighShutdown?(LowShutdown=1.1*HighShutdown,HighShutdown=0):null==HighShutdown&&0>LowShutdown&&(LowShutdown*=1.1,HighShutdown=0);realtimeGraph.updateOptions({valueRange:[LowShutdown,HighShutdown]});HighAlarm=
LowAlarm=LowShutdown=HighShutdown=null}else HighAlarm=LowAlarm=LowShutdown=HighShutdown=null,$("#realtimeDiv").html("\u6ca1\u6709\u5b9e\u65f6\u6570\u636e\uff01")})};